import{O as S,_ as z,o as i,h as c,F as A,m as W,a0 as oe,t as y,j as u,l as T,G as D,H as U,N as Y,v as ue,i as P,r as q,f as F,a1 as te,a2 as se,g as O,n as w,w as E,k as h,q as I,K as le,s as ie,x as ae,b as ce,a as re,D as de,E as pe}from"./index-5a581e72.js";const ve=()=>{const m=f=>{let p=C(f),_="https://www.wakfu.com/en/mmorpg/encyclopedia",n="";return f.type.validSlots.includes(S.FIRST_WEAPON.id)||f.type.validSlots.includes(S.SECOND_WEAPON.id)?n=`${_}/weapons/${p}`:f.type.validSlots.includes(S.PET.id)?n=`${_}/pets/${p}`:f.type.validSlots.includes(S.MOUNT.id)?n=`${_}/mounts/${p}`:f.type.validSlots.includes(S.ACCESSORY.id)?n=`${_}/accessories/${p}`:n=`${_}/armors/${p}`,n},C=f=>{let p=f.id,_=f.name.toLowerCase().replace(" ","-");return`${p}-${_}`};return{getItemEncyclopediaUrl:m}};const me={key:0},_e={key:1},he={key:2},ye={key:3},fe={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1}},setup(m){let C=m;const f=n=>!![400].includes(n.id),p=n=>{let o=Object.keys(U).find(a=>U[a].rawIds.includes(n));return o===void 0?null:U[o]},_=n=>{let o=n.values[0],a=0;return Y.includes(C.item.type.id)?C.item.id===12237?a=o+25*n.values[1]:a=o+50*n.values[1]:a=o,Math.floor(a)};return(n,o)=>(i(),c("div",{class:D(`${m.cardMode?"effects-wrapper flex flex-wrap":"tooltip-effect-list"}`)},[(i(!0),c(A,null,W(m.item.equipEffects,(a,b)=>(i(),c(A,{key:`${m.item.id}-${a.id}-${b}`},[p(a.id)&&!f(a)?(i(),c("div",{key:0,class:"effect-line px-2 py-1",style:oe({width:m.cardMode&&!a.longEntry?"50%":"100%"})},[a.id===1068?(i(),c("div",me,"+"+y(a.values[0])+" Mastery of "+y(a.values[2])+" random elements",1)):a.id===1069?(i(),c("div",_e," +"+y(a.values[0])+" Resistance of "+y(a.values[2])+" random elements ",1)):a.id===304?(i(),c("div",he,"Adds the "+y(n.$t(`states.${a.values[0]}`))+" state",1)):(i(),c("div",ye,[u("span",null,y(_(a)>0?"+":"")+y(_(a)),1),u("span",null,y(n.$t(p(a.id).text).charAt(0)==="%"?n.$t(p(a.id).text):" "+n.$t(p(a.id).text)),1)]))],4)):T("",!0)],64))),128))],2))}},ge=z(fe,[["__scopeId","data-v-b590ed99"]]);const ne=m=>(ie("data-v-9586bbc3"),m=m(),ae(),m),ke=ne(()=>u("div",{class:"drag-bar"},null,-1)),xe={class:"edit-item-modal-content flex flex-column pb-2"},be={class:"header-area flex px-3 pt-2 pb-1"},$e={class:"flex flex-column ml-1"},Se={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},Ee={class:"flex"},we={key:0},Ae={key:1},Ce=ne(()=>u("div",{class:"flex-grow-1"},null,-1)),Ie={key:0,class:"random-mastery-section flex flex-column px-3"},Oe={class:"text-center w-full text-lg mb-2 pt-2"},We={class:"flex justify-content-center gap-2 px-3"},Te={key:0,class:"flex align-items-center"},qe={key:1},Me={class:"flex align-items-center py-1 px-2"},Re={class:"capitalize"},Ne={key:1,class:"random-resistance-section flex flex-column px-3"},Le={class:"text-center w-full text-lg mb-2 pt-2"},De={class:"flex justify-content-center gap-2 px-3"},je={key:0,class:"flex align-items-center"},Ve={key:1},Be={class:"flex align-items-center py-1 px-2"},Ue={class:"capitalize"},Pe={class:"flex justify-content-center mt-2"},Fe={__name:"EditEquipmentModal",setup(m,{expose:C}){let f=ue();const p=P("currentCharacter"),_=q(!1),n=q(null),o=q({}),a=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],b=F(()=>{var s,e;return(e=(s=n.value)==null?void 0:s.equipEffects)==null?void 0:e.find(t=>t.id===1068)}),k=F(()=>{var s,e;return(e=(s=n.value)==null?void 0:s.equipEffects)==null?void 0:e.find(t=>t.id===1069)});te.on(se.UPDATE_RAND_ELEM_SELECTORS,()=>{r(),L()});const r=()=>{_.value&&b.value!==void 0&&(o.value.masterySlot1=a.find(s=>{var e;return s.value===((e=b.value.masterySlot1)==null?void 0:e.type)}),o.value.masterySlot2=a.find(s=>{var e;return s.value===((e=b.value.masterySlot2)==null?void 0:e.type)}),o.value.masterySlot3=a.find(s=>{var e;return s.value===((e=b.value.masterySlot3)==null?void 0:e.type)}))},L=()=>{_.value&&k.value!==void 0&&(o.value.resistanceSlot1=a.find(s=>{var e,t;return s.value===((t=(e=k.value)==null?void 0:e.resistanceSlot1)==null?void 0:t.type)}),o.value.resistanceSlot2=a.find(s=>{var e,t;return s.value===((t=(e=k.value)==null?void 0:e.resistanceSlot2)==null?void 0:t.type)}),o.value.resistanceSlot3=a.find(s=>{var e,t;return s.value===((t=(e=k.value)==null?void 0:e.resistanceSlot3)==null?void 0:t.type)}))},j=(s,e)=>{var d,$;let t=($=(d=n.value)==null?void 0:d.equipEffects)==null?void 0:$.find(l=>l.id===1068);t[e]={type:o.value[e].value,value:b.value.values[0]},Object.keys(t).forEach(l=>{var g;l!==e&&((g=t[l])==null?void 0:g.type)===o.value[e].value&&(t[l]={type:a[0].value,value:[]},o.value[l]=a[0])})},V=()=>{Object.keys(o.value).forEach(s=>{var e,t;if(o.value[s]){let d=(t=(e=n.value)==null?void 0:e.equipEffects)==null?void 0:t.find($=>$.id===1069);d[s]={type:o.value[s].value,value:k.value.values[0]}}})},M=()=>{Object.keys(p.value.equipment).forEach(s=>{p.value.equipment[s]!==null&&p.value.equipment[s].equipEffects&&p.value.equipment[s].equipEffects.forEach(e=>{var t,d,$,l,g,v;e.id===1068&&b.value&&(e.values[2]>=1&&(e.masterySlot1={type:((t=o.value.masterySlot1)==null?void 0:t.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.masterySlot2={type:((d=o.value.masterySlot2)==null?void 0:d.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.masterySlot3={type:(($=o.value.masterySlot3)==null?void 0:$.value)||"empty",value:e.values[0]})),e.id===1069&&k.value&&(e.values[2]>=1&&(e.resistanceSlot1={type:((l=o.value.resistanceSlot1)==null?void 0:l.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.resistanceSlot2={type:((g=o.value.resistanceSlot2)==null?void 0:g.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.resistanceSlot3={type:((v=o.value.resistanceSlot3)==null?void 0:v.value)||"empty",value:e.values[0]}))})}),te.emit(se.UPDATE_RAND_ELEM_SELECTORS)},R=(s,e,t)=>{n.value=p.value.equipment[s],_.value=!0,le(()=>{let d=document.getElementById(f);d.style.position="fixed",d.style.left=`${e}px`,d.style.top=`${t}px`,r(),L()})},B=()=>{_.value=!1};return C({open:R}),(s,e)=>{const t=O("p-image"),d=O("p-button"),$=O("p-dropdown"),l=O("p-dialog");return i(),w(l,{id:I(f),visible:_.value,"onUpdate:visible":e[0]||(e[0]=g=>_.value=g)},{header:E(()=>[ke]),default:E(()=>[u("div",xe,[u("div",be,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${n.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),u("div",$e,[u("div",Se,y(n.value.name),1),u("div",Ee,[h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${n.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${n.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),I(Y).includes(n.value.type.id)?(i(),c("div",we,"Item Level: "+y(n.value.id===12237?"25":"50"),1)):(i(),c("div",Ae,"Level: "+y(n.value.level),1))])]),Ce,h(d,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:B})]),b.value?(i(),c("div",Ie,[u("div",Oe,"+"+y(b.value.values[0])+" Mastery Assignment",1),u("div",We,[(i(!0),c(A,null,W(b.value.values[2],g=>(i(),w($,{key:g,modelValue:o.value["masterySlot"+g],"onUpdate:modelValue":v=>o.value["masterySlot"+g]=v,class:"mastery-dropdown","option-label":"label",options:a,onChange:v=>j(v,"masterySlot"+g)},{value:E(v=>[v.value?(i(),c("div",Te,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${v.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",qe,[h(t,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(v=>[u("div",Me,[u("div",Re,y(v.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):T("",!0),k.value?(i(),c("div",Ne,[u("div",Le,"+"+y(k.value.values[0])+" Resistance Assignment",1),u("div",De,[(i(!0),c(A,null,W(k.value.values[2],g=>(i(),w($,{key:g,modelValue:o.value["resistanceSlot"+g],"onUpdate:modelValue":v=>o.value["resistanceSlot"+g]=v,class:"mastery-dropdown",options:a,"option-label":"label",onChange:V},{value:E(v=>[v.value?(i(),c("div",je,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${v.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",Ve,[h(t,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(v=>[u("div",Be,[u("div",Ue,y(v.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):T("",!0),u("div",Pe,[h(d,{class:"py-2",label:"Apply to all Items",onClick:M})])])]),_:1},8,["id","visible"])}}},ze=z(Fe,[["__scopeId","data-v-9586bbc3"]]);const N=m=>(ie("data-v-bbd32cf7"),m=m(),ae(),m),Ye={class:"flex equipment-slots-wrapper"},Ge={key:0,class:"flex align-items-center justify-content-center"},He={key:1,class:"flex align-items-center justify-content-center"},Je={class:"flex align-items-center justify-content-center"},Qe=N(()=>u("div",{class:"hover-icon search"},[u("i",{class:"pi pi-search"})],-1)),Xe={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Ze=["onClick"],Ke=N(()=>u("i",{class:"pi pi-pencil"},null,-1)),et=[Ke],tt=["onClick"],st=N(()=>u("i",{class:"pi pi-trash"},null,-1)),lt=[st],it={key:0,class:"random-stat-icons-wrapper"},at={key:1,class:"random-stat-icons-wrapper"},nt={key:0,class:"item-card-tooltip"},ot={class:"effect-header flex pt-2 px-1"},ut={class:"flex flex-column"},ct={class:"item-name mr-2"},rt={class:"flex"},dt={key:0},pt={key:1},vt=N(()=>u("div",{class:"flex-grow-1"},null,-1)),mt={class:"flex"},_t=N(()=>u("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),ht={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(m){const{t:C}=ce();let f=m;const p=re(),{getItemEncyclopediaUrl:_}=ve(),n=P("itemFilters"),o=q(null),a=F(()=>{let s=k.value.equipment[S.FIRST_WEAPON.id];return s?!!s.type.disabledSlots.includes(S.SECOND_WEAPON.id):!1}),b=P("masterData"),k=q(f.character),r=q({});de(b,pe.debounce(()=>{le(()=>{var s;k.value=f.character,r.value=(s=k.value)==null?void 0:s.equipment})},100),{immediate:!0});const L=s=>{n.itemTypeFilters.forEach(e=>{e.validSlots.includes(S[s])?e.checked=!0:e.checked=!1})},j=(s,e,t)=>{o.value[s].open(e,t.target.getBoundingClientRect().left-200,t.target.getBoundingClientRect().bottom+10)},V=(s,e)=>{p.require({group:"popup",target:e.currentTarget,message:C("confirms.areYouSure"),accept:()=>{k.value.equipment[s]=null}})},M=s=>{var e,t;return((t=(e=k.value.equipment[s])==null?void 0:e.equipEffects)==null?void 0:t.find(d=>d.id===1068))||null},R=s=>{var e,t;return((t=(e=k.value.equipment[s])==null?void 0:e.equipEffects)==null?void 0:t.find(d=>d.id===1069))||null},B=s=>{let e=_(s);window.open(e,"_blank")};return(s,e)=>{const t=O("p-image"),d=O("p-button"),$=O("tippy");return i(),c("div",Ye,[(i(!0),c(A,null,W(I(S),(l,g,v)=>{var G,H;return i(),c(A,{key:l.id},[m.readOnly?(i(),c("div",{key:0,class:D(["equipment-display",{"has-item":r.value[l.id]!==null}])},[(G=r.value[l.id])!=null&&G.imageId?(i(),c("div",Ge,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(H=r.value[l.id])==null?void 0:H.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(i(),c("div",He,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${l.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(i(),c(A,{key:1},[r.value[l.id]===null||r.value[l.id]===void 0?(i(),w(d,{key:0,class:D(["equipment-button",{"has-item":r.value[l.id]!==null,disabled:l.id===I(S).SECOND_WEAPON.id&&a.value}]),onClick:x=>L(l.id)},{default:E(()=>{var x;return[u("div",Je,[Qe,l.id===I(S).SECOND_WEAPON.id&&a.value?(i(),w(t,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(x=r.value[I(S).FIRST_WEAPON.id])==null?void 0:x.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(i(),w(t,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${l.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(i(),w($,{key:1,placement:"bottom",interactive:"",duration:"0"},{content:E(()=>{var x,J,Q,X,Z,K,ee;return[r.value[l.id]?(i(),c("div",nt,[u("div",ot,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(x=r.value[l.id])==null?void 0:x.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),u("div",ut,[u("div",ct,y(s.$t(`items.${r.value[l.id].id}`)),1),u("div",rt,[h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(J=r.value[l.id])==null?void 0:J.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(X=(Q=r.value[l.id])==null?void 0:Q.type)==null?void 0:X.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),I(Y).includes((K=(Z=r.value[l.id])==null?void 0:Z.type)==null?void 0:K.id)?(i(),c("div",dt,"Item Level: "+y(r.value[l.id].id===12237?"25":"50"),1)):(i(),c("div",pt,"Level: "+y((ee=r.value[l.id])==null?void 0:ee.level),1))])]),vt,u("div",mt,[h($,{placement:"left"},{content:E(()=>[_t]),default:E(()=>[h(d,{icon:"pi pi-question-circle",class:"equip-button",onClick:yt=>B(r.value[l.id])},null,8,["onClick"])]),_:2},1024)])]),h(ge,{item:r.value[l.id]},null,8,["item"])])):T("",!0)]}),default:E(()=>[u("div",{class:D(["equipment-button",{"has-item":r.value[l.id]!==null}])},[u("div",Xe,[u("div",{class:"hover-icon edit",onClick:x=>j(v,l.id,x)},et,8,Ze),u("div",{class:"hover-icon remove",onClick:x=>V(l.id,x)},lt,8,tt),h(t,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${r.value[l.id].imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),M(l.id)!==null?(i(),c("div",it,[(i(!0),c(A,null,W(M(l.id).values[2],x=>(i(),w(t,{key:x,src:`https://tmktahu.github.io/WakfuAssets/statistics/${M(l.id)[`masterySlot${x}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):T("",!0),R(l.id)!==null?(i(),c("div",at,[(i(!0),c(A,null,W(R(l.id).values[2],x=>(i(),w(t,{key:x,src:`https://tmktahu.github.io/WakfuAssets/statistics/${R(l.id)[`resistanceSlot${x}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):T("",!0)])],2)]),_:2},1024)),h(ze,{ref_for:!0,ref_key:"editEquipmentModal",ref:o},null,512)],64))],64)}),128))])}}},gt=z(ht,[["__scopeId","data-v-bbd32cf7"]]),kt="/assets/addCompanion-b3d0cb0d.png";export{gt as E,ge as I,kt as a,ve as u};
