import{_ as K,u as Q,a as X,b as Y,i as Z,r as ee,c as te,d as se,e as U,f as m,o as n,g as h,h as t,t as c,j as o,k as ae,w as v,l as y,C as I,v as le,F as P,m as T,n as C,p,q as oe,s as re}from"./index-756edbbb.js";import{E as R}from"./EquipmentButtons-82fee453.js";import{a as A}from"./addCompanion-f6ce7806.js";import"./ItemStatList-6a724bcd.js";const x=k=>(oe("data-v-c5679d71"),k=k(),re(),k),ne={class:"flex flex-column flex-grow-1 ml-4 mr-3",style:{height:"100%",overflow:"hidden"}},ce={class:"mt-3",style:{"font-size":"42px"}},ie={class:"mt-2"},de={class:"flex align-items-center w-full"},pe={class:"text-xl mr-3"},ue={key:0,class:"mt-2",style:{color:"var(--error)"}},me={class:"character-area"},he={class:"flex w-full"},ve={class:"text-xl"},_e=x(()=>t("div",{class:"flex-grow-1"},null,-1)),ge={class:"character-enties-wrapper flex flex-column mt-2 pb-3"},fe=["onDrop"],ye=x(()=>t("i",{class:"mdi mdi-folder"},null,-1)),Ce={class:"flex"},xe={class:"mx-2"},ke=x(()=>t("i",{class:"mdi mdi-pencil"},null,-1)),we={class:"px-3"},be=["onDrop"],De=["onClick","onDragstart"],Be={class:"character-info flex align-items-center justify-content-left flex-grow-1"},Ie={class:"ml-3"},Pe={class:"class-name flex-grow-1 truncate"},Te={class:"class-level"},Ve={class:"character-items flex-grow-1"},$e=x(()=>t("i",{class:"mdi mdi-folder"},null,-1)),Ee=x(()=>t("div",{class:"mx-2"},"Ungrouped",-1)),Le=[$e,Ee],Ne=["onClick","onDragstart"],Ue={class:"character-info flex align-items-center justify-content-left flex-grow-1"},Re={class:"ml-3"},Ae={class:"class-name flex-grow-1 truncate"},Se={class:"class-level"},je={class:"character-items flex-grow-1"},Fe={__name:"CharactersPage",setup(k){const{t:V}=Q(),S=X(),B=Y(),i=Z("masterData"),g=ee(""),{decodeBuildCode:j}=te(),{createNewCharacter:F,createNewCharacterFromCode:q,deleteCharacter:G}=se(i),$=U(()=>j(g.value)!==null),O=U(()=>{let s=[];return i.groups.forEach(r=>{s.push(...r.buildIds)}),i.characters.filter(r=>!s.includes(r.id))}),W=()=>{let s=F();B.push({name:I,params:{characterId:s.id}})},z=()=>{let s=q(g.value);B.push({name:I,params:{characterId:s.id}})},H=()=>{i.groups.push({id:le(),name:V("charactersPage.newGroup"),buildIds:[]})},w=(s,e)=>{S.require({group:"popup",target:s.currentTarget,message:V("confirms.irreversable"),accept:()=>{G(e)}})},E=(s,e)=>{s.target.classList.contains("delete-button")||B.push({name:I,params:{characterId:e}})},f=s=>i.characters.find(e=>e.id===s),L=(s,e)=>{s.dataTransfer.dropEffect="move",s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("buildId",e)},b=(s,e)=>{try{let r=s.dataTransfer.getData("buildId");i.groups.forEach(_=>{if(_.buildIds.includes(r)){let d=_.buildIds.indexOf(r);_.buildIds.splice(d,1)}}),e!=="none"&&e.buildIds.push(r)}catch{}};return(s,e)=>{const r=m("p-divider"),_=m("p-inputText"),d=m("p-button"),M=m("p-inplace"),D=m("p-image"),N=m("p-accordionTab"),J=m("p-accordion");return n(),h("div",ne,[t("div",ce,c(s.$t("charactersPage.title")),1),t("div",ie,c(s.$t("charactersPage.description")),1),o(r),t("div",null,[t("div",de,[t("div",pe,c(s.$t("charactersPage.codeInputLabel"))+":",1),o(_,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),placeholder:s.$t("charactersPage.codeInputPlaceholder"),class:"flex-grow-1 py-2"},null,8,["modelValue","placeholder"]),o(d,{icon:"mdi mdi-plus-thick",disabled:!$.value,label:s.$t("charactersPage.codeInputButton"),class:"create-character-button py-1 pr-3 pl-2 ml-3",onClick:z},null,8,["disabled","label"])]),!$.value&&g.value!==""?(n(),h("div",ue,c(s.$t("charactersPage.invalidBuildCode")),1)):ae("",!0)]),o(r),t("div",me,[t("div",he,[t("div",ve,c(s.$t("charactersPage.savedCharactersTitle")),1),_e,o(d,{icon:"mdi mdi-folder",label:s.$t("charactersPage.createNewGroupButton"),class:"create-character-button py-1 pr-3 pl-2",onClick:H},null,8,["label"]),o(d,{icon:"mdi mdi-plus-thick",label:s.$t("charactersPage.createNewCharacterButton"),class:"create-character-button py-1 pr-3 pl-2 ml-3",onClick:W},null,8,["label"])]),t("div",ge,[o(J,{multiple:"","active-index":[...y(i).groups.keys(),y(i).groups.length]},{default:v(()=>[(n(!0),h(P,null,T(y(i).groups,a=>(n(),C(N,{key:a.id},{header:v(()=>[t("div",{class:"flex align-items-center w-full pl-3 py-2",onDrop:l=>b(l,a),onDragover:e[2]||(e[2]=p(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=p(()=>{},["prevent"]))},[ye,o(M,{closable:!0,pt:{content:{class:"flex align-items-center"},button:{class:"py-1"}},onClick:e[1]||(e[1]=p(()=>{},["stop"]))},{display:v(()=>[t("div",Ce,[t("div",xe,c(a.name),1),ke])]),content:v(()=>[t("div",we,[o(_,{modelValue:a.name,"onUpdate:modelValue":l=>a.name=l,class:"py-1",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)],40,fe)]),default:v(()=>[t("div",{onDrop:l=>b(l,a),onDragover:e[4]||(e[4]=p(()=>{},["prevent"])),onDragenter:e[5]||(e[5]=p(()=>{},["prevent"]))},[(n(!0),h(P,null,T(a.buildIds,l=>(n(),h("div",{key:l,class:"character-entry py-2 mt-2",draggable:"true",onClick:u=>E(u,l),onDragstart:u=>L(u,l)},[t("div",Be,[t("div",Ie,[f(l).class?(n(),C(D,{key:0,class:"class-image",src:`https://tmktahu.github.io/WakfuAssets/classes/${f(l).class}.png`,"image-style":"width: 40px"},null,8,["src"])):(n(),C(D,{key:1,class:"class-image",src:y(A),"image-style":"width: 40px"},null,8,["src"]))]),o(r,{class:"mx-2",layout:"vertical"}),t("div",Pe,c(f(l).name),1),o(r,{class:"mx-2",layout:"vertical"}),t("div",Te,"Lvl "+c(f(l).level),1),o(r,{class:"mx-2",layout:"vertical"}),o(d,{class:"by-level-delete-button delete-button py-2 px-2 mr-3",icon:"pi pi-trash",onClick:u=>w(u,l)},null,8,["onClick"])]),t("div",Ve,[o(R,{character:f(l),"read-only":""},null,8,["character"])]),o(d,{class:"at-end-delete-button delete-button py-2 px-2 mr-3",icon:"pi pi-trash",onClick:u=>w(u,l)},null,8,["onClick"])],40,De))),128))],40,be)]),_:2},1024))),128)),o(N,null,{header:v(()=>[t("div",{class:"flex align-items-center w-full pl-3 py-2",draggable:"true",onDrop:e[6]||(e[6]=a=>b(a,"none")),onDragover:e[7]||(e[7]=p(()=>{},["prevent"])),onDragenter:e[8]||(e[8]=p(()=>{},["prevent"]))},Le,32)]),default:v(()=>[t("div",{onDrop:e[9]||(e[9]=a=>b(a,s.group)),onDragover:e[10]||(e[10]=p(()=>{},["prevent"])),onDragenter:e[11]||(e[11]=p(()=>{},["prevent"]))},[(n(!0),h(P,null,T(O.value,a=>(n(),h("div",{key:a.id,class:"character-entry py-2 mt-2",draggable:"true",onClick:l=>E(l,a.id),onDragstart:l=>L(l,a.id)},[t("div",Ue,[t("div",Re,[a.class?(n(),C(D,{key:0,class:"class-image",src:`https://tmktahu.github.io/WakfuAssets/classes/${a.class}.png`,"image-style":"width: 40px"},null,8,["src"])):(n(),C(D,{key:1,class:"class-image",src:y(A),"image-style":"width: 40px"},null,8,["src"]))]),o(r,{class:"mx-2",layout:"vertical"}),t("div",Ae,c(a.name),1),o(r,{class:"mx-2",layout:"vertical"}),t("div",Se,"Lvl "+c(a.level),1),o(r,{class:"mx-2",layout:"vertical"}),o(d,{class:"by-level-delete-button delete-button py-2 px-2 mr-3",icon:"pi pi-trash",onClick:l=>w(l,a.id)},null,8,["onClick"])]),t("div",je,[o(R,{character:a,"read-only":""},null,8,["character"])]),o(d,{class:"at-end-delete-button delete-button py-2 px-2 mr-3",icon:"pi pi-trash",onClick:l=>w(l,a.id)},null,8,["onClick"])],40,Ne))),128))],32)]),_:1})]),_:1},8,["active-index"])])])])}}},ze=K(Fe,[["__scopeId","data-v-c5679d71"]]);export{ze as default};
