import{I as E,_ as z,o as i,c as a,F as I,e as T,t as m,d as o,k as $,H as ae,E as B,L as Y,J as oe,i as P,n as M,q as F,z as U,A as D,r as W,g as x,w as S,b as v,f as O,p as se,h as ie,y as ue,v as j}from"./index-47c0d2bb.js";const ce=()=>{const _=h=>{let p=C(h),y="https://www.wakfu.com/en/mmorpg/encyclopedia",c="";return h.type.validSlots.includes(E.FIRST_WEAPON.id)||h.type.validSlots.includes(E.SECOND_WEAPON.id)?c=`${y}/weapons/${p}`:h.type.validSlots.includes(E.PET.id)?c=`${y}/pets/${p}`:h.type.validSlots.includes(E.MOUNT.id)?c=`${y}/mounts/${p}`:h.type.validSlots.includes(E.ACCESSORY.id)?c=`${y}/accessories/${p}`:c=`${y}/armors/${p}`,c},C=h=>{let p=h.id,y=h.name.toLowerCase().replace(" ","-");return`${p}-${y}`};return{getItemEncyclopediaUrl:_}};const re={key:0,class:"tooltip-effect-list"},de={key:0,class:"effect-line px-2 py-1"},pe={key:0},me={key:1},_e={key:2},ve={key:1,class:"effects-wrapper flex flex-wrap"},he={key:0},ye={key:1},ge={key:2},fe={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1}},setup(_){const C=_,h=c=>!![400].includes(c.id),p=c=>{let r=Object.keys(B).find(s=>B[s].rawId===c);return r===void 0?null:B[r]},y=c=>{let r=c.values[0],s=0;return Y.includes(C.item.type.id)?s=r+50*c.values[1]:s=r,Math.floor(s)};return(c,r)=>_.cardMode?(i(),a("div",ve,[(i(!0),a(I,null,T(_.item.equipEffects,s=>{var l;return i(),a(I,{key:s.id},[p(s.id)&&!h(s)?(i(),a("div",{key:0,class:"effect-line pl-2 py-1",style:ae({width:s.longEntry?"100%":"50%"})},[s.id===1068?(i(),a("div",he,"+"+m(s.values[0])+" Mastery of "+m(s.values[2])+" random elements",1)):s.id===1069?(i(),a("div",ye," +"+m(s.values[0])+" Resistance of "+m(s.values[2])+" random elements ",1)):(i(),a("div",ge,[o("span",null,m((l=p(s.id))!=null&&l.isNegative?"-":"+")+m(y(s)),1),o("span",null,m(p(s.id).text.charAt(0)==="%"?p(s.id).text:" "+p(s.id).text),1)]))],4)):$("",!0)],64)}),128))])):(i(),a("div",re,[(i(!0),a(I,null,T(_.item.equipEffects,(s,l)=>{var k;return i(),a(I,{key:`${_.item.id}-${s.id}-${l}`},[p(s.id)&&!h(s)?(i(),a("div",de,[s.id===1068?(i(),a("div",pe,"+"+m(s.values[0])+" Mastery of "+m(s.values[2])+" random elements",1)):s.id===1069?(i(),a("div",me," +"+m(s.values[0])+" Resistance of "+m(s.values[2])+" random elements ",1)):(i(),a("div",_e,[o("span",null,m((k=p(s.id))!=null&&k.isNegative?"-":"+")+m(y(s)),1),o("span",null,m(p(s.id).text.charAt(0)==="%"?p(s.id).text:" "+p(s.id).text),1)]))])):$("",!0)],64)}),128))]))}},ke=z(fe,[["__scopeId","data-v-9820680e"]]);const le=_=>(se("data-v-898f7755"),_=_(),ie(),_),xe=le(()=>o("div",{class:"drag-bar"},null,-1)),$e={class:"edit-item-modal-content flex flex-column pb-2"},Ee={class:"header-area flex px-3 pt-2 pb-1"},be={class:"flex flex-column ml-1"},Se={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},qe={class:"flex"},we={key:0},Ae={key:1},Ie=le(()=>o("div",{class:"flex-grow-1"},null,-1)),Ce={key:0,class:"random-mastery-section flex flex-column px-3"},We={class:"text-center w-full text-lg mb-2 pt-2"},Oe={class:"flex justify-content-center gap-2 px-3"},Ne={key:0,class:"flex align-items-center"},Me={key:1},Te={class:"flex align-items-center py-1 px-2"},Re={class:"capitalize"},Le={key:1,class:"random-resistance-section flex flex-column px-3"},Ve={class:"text-center w-full text-lg mb-2 pt-2"},Be={class:"flex justify-content-center gap-2 px-3"},De={key:0,class:"flex align-items-center"},je={key:1},Pe={class:"flex align-items-center py-1 px-2"},Fe={class:"capitalize"},Ue={__name:"EditEquipmentModal",setup(_,{expose:C}){let h=oe();const p=P("currentCharacter"),y=M(!1),c=M(null),r=M({}),s=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],l=F(()=>{var d,t;return(t=(d=c.value)==null?void 0:d.equipEffects)==null?void 0:t.find(n=>n.id===1068)});U(l,()=>{D(()=>{r.value.masterySlot1=s.find(d=>{var t;return d.value===((t=l.value.masterySlot1)==null?void 0:t.type)||void 0}),r.value.masterySlot2=s.find(d=>{var t;return d.value===((t=l.value.masterySlot2)==null?void 0:t.type)||void 0}),r.value.masterySlot3=s.find(d=>{var t;return d.value===((t=l.value.masterySlot3)==null?void 0:t.type)||void 0})})});const k=F(()=>{var d,t;return(t=(d=c.value)==null?void 0:d.equipEffects)==null?void 0:t.find(n=>n.id===1069)});U(k,()=>{D(()=>{r.value.resistanceSlot1=s.find(d=>{var t;return d.value===((t=k.value.resistanceSlot1)==null?void 0:t.type)||void 0}),r.value.resistanceSlot2=s.find(d=>{var t;return d.value===((t=k.value.resistanceSlot2)==null?void 0:t.type)||void 0}),r.value.resistanceSlot3=s.find(d=>{var t;return d.value===((t=k.value.resistanceSlot3)==null?void 0:t.type)||void 0})})});const L=(d,t)=>{var u,f;let n=(f=(u=c.value)==null?void 0:u.equipEffects)==null?void 0:f.find(b=>b.id===1068);n[t]={type:r.value[t].value,value:l.value.values[0]},Object.keys(n).forEach(b=>{var g;b!==t&&((g=n[b])==null?void 0:g.type)===r.value[t].value&&(n[b]={type:s[0].value,value:[]},r.value[b]=s[0])})},V=()=>{Object.keys(r.value).forEach(d=>{var t,n;if(r.value[d]){let u=(n=(t=c.value)==null?void 0:t.equipEffects)==null?void 0:n.find(f=>f.id===1069);u[d]={type:r.value[d].value,value:k.value.values[0]}}})},q=(d,t,n)=>{c.value=p.value.equipment[d],y.value=!0,D(()=>{let u=document.getElementById(h);u.style.position="fixed",u.style.left=`${t}px`,u.style.top=`${n}px`})},w=()=>{y.value=!1};return C({open:q}),(d,t)=>{const n=W("p-image"),u=W("p-button"),f=W("p-dropdown"),b=W("p-dialog");return i(),x(b,{id:O(h),visible:y.value,"onUpdate:visible":t[0]||(t[0]=g=>y.value=g)},{header:S(()=>[xe]),default:S(()=>[o("div",$e,[o("div",Ee,[v(n,{src:`https://tmktahu.github.io/WakfuAssets/items/${c.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),o("div",be,[o("div",Se,m(c.value.name),1),o("div",qe,[v(n,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${c.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),v(n,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${c.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),O(Y).includes(c.value.type.id)?(i(),a("div",we,"Item Level: 50")):(i(),a("div",Ae,"Level: "+m(c.value.level),1))])]),Ie,v(u,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:w})]),l.value?(i(),a("div",Ce,[o("div",We,"+"+m(l.value.values[0])+" Mastery Assignment",1),o("div",Oe,[(i(!0),a(I,null,T(l.value.values[2],g=>(i(),x(f,{key:g,modelValue:r.value["masterySlot"+g],"onUpdate:modelValue":e=>r.value["masterySlot"+g]=e,class:"mastery-dropdown",options:s,onChange:e=>L(e,"masterySlot"+g)},{value:S(e=>[e.value?(i(),a("div",Ne,[v(n,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${e.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),a("span",Me,[v(n,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:S(e=>[o("div",Te,[o("div",Re,m(e.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):$("",!0),k.value?(i(),a("div",Le,[o("div",Ve,"+"+m(k.value.values[0])+" Resistance Assignment",1),o("div",Be,[(i(!0),a(I,null,T(k.value.values[2],g=>(i(),x(f,{key:g,modelValue:r.value["resistanceSlot"+g],"onUpdate:modelValue":e=>r.value["resistanceSlot"+g]=e,class:"mastery-dropdown",options:s,onChange:V},{value:S(e=>[e.value?(i(),a("div",De,[v(n,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${e.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),a("span",je,[v(n,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:S(e=>[o("div",Pe,[o("div",Fe,m(e.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):$("",!0)])]),_:1},8,["id","visible"])}}},ze=z(Ue,[["__scopeId","data-v-898f7755"]]);const R=_=>(se("data-v-3b065159"),_=_(),ie(),_),Ye={class:"flex equipment-slots-wrapper pr-3"},Ge={key:0,class:"flex align-items-center justify-content-center"},He={key:1,class:"flex align-items-center justify-content-center"},Je={class:"flex align-items-center justify-content-center"},Qe=R(()=>o("div",{class:"hover-icon search"},[o("i",{class:"pi pi-search"})],-1)),Xe={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Ze=["onClick"],Ke=R(()=>o("i",{class:"pi pi-pencil"},null,-1)),et=[Ke],tt=["onClick"],st=R(()=>o("i",{class:"pi pi-trash"},null,-1)),it=[st],lt={key:0,class:"random-stat-icons-wrapper"},nt={key:1,class:"random-stat-icons-wrapper"},at={key:0,class:"item-card-tooltip"},ot={class:"effect-header flex pt-2 px-1"},ut={class:"flex flex-column"},ct={class:"item-name mr-2"},rt={class:"flex"},dt={key:0},pt={key:1},mt=R(()=>o("div",{class:"flex-grow-1"},null,-1)),_t={class:"flex"},vt=R(()=>o("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),ht={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(_){const C=_,h=ue(),{getItemEncyclopediaUrl:p}=ce(),y=P("itemFilters"),c=M(null),r=F(()=>{let t=l.value.equipment[E.FIRST_WEAPON.id];return t?!!t.type.disabledSlots.includes(E.SECOND_WEAPON.id):!1}),s=P("masterData"),l=M(C.character);U(s,()=>{l.value=C.character});const k=t=>{y.itemTypeFilters.forEach(n=>{n.validSlots.includes(E[t])?n.checked=!0:n.checked=!1})},L=(t,n,u)=>{c.value[t].open(n,u.target.getBoundingClientRect().left-200,u.target.getBoundingClientRect().bottom+10)},V=(t,n)=>{h.require({target:n.currentTarget,message:"Are you sure?",accept:()=>{l.value.equipment[t]=null}})},q=(t,n)=>{var u;return((u=l.value.equipment[t].equipEffects.find(f=>f.id===1068))==null?void 0:u[n])||null},w=(t,n)=>{var u;return((u=l.value.equipment[t].equipEffects.find(f=>f.id===1069))==null?void 0:u[n])||null},d=t=>{let n=p(t);window.open(n,"_blank")};return(t,n)=>{const u=W("p-image"),f=W("p-button"),b=W("tippy"),g=W("p-confirmPopup");return i(),a("div",Ye,[(i(!0),a(I,null,T(O(E),(e,yt,ne)=>{var G,H,J;return i(),a(I,{key:e.id},[_.readOnly?(i(),a("div",{key:0,class:j(["equipment-display",{"has-item":l.value.equipment[e.id]!==null}])},[(H=(G=l.value)==null?void 0:G.equipment[e.id])!=null&&H.imageId?(i(),a("div",Ge,[v(u,{src:`https://tmktahu.github.io/WakfuAssets/items/${(J=l.value.equipment[e.id])==null?void 0:J.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(i(),a("div",He,[v(u,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(i(),a(I,{key:1},[l.value.equipment[e.id]===null?(i(),x(f,{key:0,class:j(["equipment-button",{"has-item":l.value.equipment[e.id]!==null,disabled:e.id===O(E).SECOND_WEAPON.id&&r.value}]),onClick:A=>k(e.id)},{default:S(()=>{var A;return[o("div",Je,[Qe,e.id===O(E).SECOND_WEAPON.id&&r.value?(i(),x(u,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(A=l.value.equipment[O(E).FIRST_WEAPON.id])==null?void 0:A.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(i(),x(u,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(i(),x(b,{key:1,placement:"bottom",interactive:""},{content:S(()=>{var A,N,Q,X,Z,K,ee,te;return[l.value.equipment[e.id]?(i(),a("div",at,[o("div",ot,[v(u,{src:`https://tmktahu.github.io/WakfuAssets/items/${(A=l.value.equipment[e.id])==null?void 0:A.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),o("div",ut,[o("div",ct,m((N=l.value.equipment[e.id])==null?void 0:N.name),1),o("div",rt,[v(u,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(Q=l.value.equipment[e.id])==null?void 0:Q.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),v(u,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(Z=(X=l.value.equipment[e.id])==null?void 0:X.type)==null?void 0:Z.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),O(Y).includes((ee=(K=l.value.equipment[e.id])==null?void 0:K.type)==null?void 0:ee.id)?(i(),a("div",dt,"Item Level: 50")):(i(),a("div",pt,"Level: "+m((te=l.value.equipment[e.id])==null?void 0:te.level),1))])]),mt,o("div",_t,[v(b,{placement:"left"},{content:S(()=>[vt]),default:S(()=>[v(f,{icon:"pi pi-question-circle",class:"equip-button",onClick:gt=>d(l.value.equipment[e.id])},null,8,["onClick"])]),_:2},1024)])]),v(ke,{item:l.value.equipment[e.id]},null,8,["item"])])):$("",!0)]}),default:S(()=>{var A;return[o("div",{class:j(["equipment-button",{"has-item":l.value.equipment[e.id]!==null}])},[o("div",Xe,[o("div",{class:"hover-icon edit",onClick:N=>L(ne,e.id,N)},et,8,Ze),o("div",{class:"hover-icon remove",onClick:N=>V(e.id,N)},it,8,tt),v(u,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(A=l.value.equipment[e.id])==null?void 0:A.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),q(e.id,"masterySlot1")!==null?(i(),a("div",lt,[q(e.id,"masterySlot1")!==null?(i(),x(u,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(e.id,"masterySlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),q(e.id,"masterySlot2")!==null?(i(),x(u,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(e.id,"masterySlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),q(e.id,"masterySlot3")!==null?(i(),x(u,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(e.id,"masterySlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0)])):$("",!0),w(e.id,"resistanceSlot1")!==null?(i(),a("div",nt,[w(e.id,"resistanceSlot1")!==null?(i(),x(u,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${w(e.id,"resistanceSlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),w(e.id,"resistanceSlot2")!==null?(i(),x(u,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${w(e.id,"resistanceSlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),w(e.id,"resistanceSlot3")!==null?(i(),x(u,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${w(e.id,"resistanceSlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0)])):$("",!0)])],2)]}),_:2},1024)),v(ze,{ref_for:!0,ref_key:"editEquipmentModal",ref:c},null,512)],64))],64)}),128)),v(g)])}}},kt=z(ht,[["__scopeId","data-v-3b065159"]]);export{kt as E,ke as I,ce as u};
