import{_ as D,o as t,c as n,F as q,e as B,t as r,d as o,k as f,G as ie,E as T,L as N,H as le,i as Z,n as V,q as Q,y as F,z as R,r as w,g as $,w as S,b as m,f as L,p as ee,h as te,J as ne,v as O,I as X}from"./index-a2411ebc.js";const ae={key:0,class:"tooltip-effect-list"},oe={key:0,class:"effect-line px-2 py-1"},ue={key:0},ce={key:1},re={key:2},de={key:1,class:"effects-wrapper flex flex-wrap"},pe={key:0},me={key:1},_e={key:2},he={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1}},setup(_){const A=_,I=i=>!![400].includes(i.id),y=i=>{let u=Object.keys(T).find(e=>T[e].rawId===i);return u===void 0?null:T[u]},b=i=>{let u=i.values[0],e=0;return N.includes(A.item.type.id)?e=u+50*i.values[1]:e=u,Math.floor(e)};return(i,u)=>_.cardMode?(t(),n("div",de,[(t(!0),n(q,null,B(_.item.equipEffects,e=>{var v;return t(),n(q,{key:e.id},[y(e.id)&&!I(e)?(t(),n("div",{key:0,class:"effect-line pl-2 py-1",style:ie({width:e.longEntry?"100%":"50%"})},[e.id===1068?(t(),n("div",pe,"+"+r(e.values[0])+" Mastery of "+r(e.values[2])+" random elements",1)):e.id===1069?(t(),n("div",me," +"+r(e.values[0])+" Resistance of "+r(e.values[2])+" random elements ",1)):(t(),n("div",_e,[o("span",null,r((v=y(e.id))!=null&&v.isNegative?"-":"+")+r(b(e)),1),o("span",null,r(y(e.id).text.charAt(0)==="%"?y(e.id).text:" "+y(e.id).text),1)]))],4)):f("",!0)],64)}),128))])):(t(),n("div",ae,[(t(!0),n(q,null,B(_.item.equipEffects,(e,v)=>{var p;return t(),n(q,{key:`${_.item.id}-${e.id}-${v}`},[y(e.id)&&!I(e)?(t(),n("div",oe,[e.id===1068?(t(),n("div",ue,"+"+r(e.values[0])+" Mastery of "+r(e.values[2])+" random elements",1)):e.id===1069?(t(),n("div",ce," +"+r(e.values[0])+" Resistance of "+r(e.values[2])+" random elements ",1)):(t(),n("div",re,[o("span",null,r((p=y(e.id))!=null&&p.isNegative?"-":"+")+r(b(e)),1),o("span",null,r(y(e.id).text.charAt(0)==="%"?y(e.id).text:" "+y(e.id).text),1)]))])):f("",!0)],64)}),128))]))}},ve=D(he,[["__scopeId","data-v-9820680e"]]);const se=_=>(ee("data-v-d1df9473"),_=_(),te(),_),ye=se(()=>o("div",{class:"drag-bar"},null,-1)),ge={class:"edit-item-modal-content flex flex-column pb-2"},fe={class:"header-area flex px-3 pt-2 pb-1"},ke={class:"flex flex-column ml-1"},xe={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},$e={class:"flex"},be={key:0},Ee={key:1},Se=se(()=>o("div",{class:"flex-grow-1"},null,-1)),qe={key:0,class:"random-mastery-section flex flex-column px-3"},we={class:"text-center w-full text-lg mb-2 pt-2"},Ae={class:"flex justify-content-center gap-2 px-3"},Ie={key:0,class:"flex align-items-center"},Ce={key:1},We={class:"flex align-items-center"},Me={class:"capitalize"},Ve={key:1,class:"random-resistance-section flex flex-column px-3"},Be={class:"text-center w-full text-lg mb-2 pt-2"},Le={class:"flex justify-content-center gap-2 px-3"},je={key:0,class:"flex align-items-center"},Te={key:1},Re={class:"flex align-items-center"},Oe={class:"capitalize"},Fe={__name:"EditEquipmentModal",setup(_,{expose:A}){let I=le();const y=Z("currentCharacter"),b=V(!1),i=V(null),u=V({}),e=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],v=Q(()=>{var a,l;return(l=(a=i.value)==null?void 0:a.equipEffects)==null?void 0:l.find(d=>d.id===1068)});F(v,()=>{R(()=>{u.value.masterySlot1=e.find(a=>{var l;return a.value===((l=v.value.masterySlot1)==null?void 0:l.type)||void 0}),u.value.masterySlot2=e.find(a=>{var l;return a.value===((l=v.value.masterySlot2)==null?void 0:l.type)||void 0}),u.value.masterySlot3=e.find(a=>{var l;return a.value===((l=v.value.masterySlot3)==null?void 0:l.type)||void 0})})});const p=Q(()=>{var a,l;return(l=(a=i.value)==null?void 0:a.equipEffects)==null?void 0:l.find(d=>d.id===1069)});F(p,()=>{R(()=>{u.value.resistanceSlot1=e.find(a=>{var l;return a.value===((l=p.value.resistanceSlot1)==null?void 0:l.type)||void 0}),u.value.resistanceSlot2=e.find(a=>{var l;return a.value===((l=p.value.resistanceSlot2)==null?void 0:l.type)||void 0}),u.value.resistanceSlot3=e.find(a=>{var l;return a.value===((l=p.value.resistanceSlot3)==null?void 0:l.type)||void 0})})});const E=()=>{Object.keys(u.value).forEach(a=>{var l,d;if(u.value[a]){let s=(d=(l=i.value)==null?void 0:l.equipEffects)==null?void 0:d.find(C=>C.id===1068);s[a]={type:u.value[a].value,value:v.value.values[0]}}})},k=()=>{Object.keys(u.value).forEach(a=>{var l,d;if(u.value[a]){let s=(d=(l=i.value)==null?void 0:l.equipEffects)==null?void 0:d.find(C=>C.id===1069);s[a]={type:u.value[a].value,value:p.value.values[0]}}})},g=(a,l,d)=>{i.value=y.value.equipment[a],b.value=!0,R(()=>{let s=document.getElementById(I);s.style.position="fixed",s.style.left=`${l}px`,s.style.top=`${d}px`})},c=()=>{b.value=!1};return A({open:g}),(a,l)=>{const d=w("p-image"),s=w("p-button"),C=w("p-dropdown"),j=w("p-dialog");return t(),$(j,{id:L(I),visible:b.value,"onUpdate:visible":l[0]||(l[0]=x=>b.value=x)},{header:S(()=>[ye]),default:S(()=>[o("div",ge,[o("div",fe,[m(d,{src:`https://tmktahu.github.io/WakfuAssets/items/${i.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),o("div",ke,[o("div",xe,r(i.value.name),1),o("div",$e,[m(d,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${i.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),m(d,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${i.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),L(N).includes(i.value.type.id)?(t(),n("div",be,"Item Level: 50")):(t(),n("div",Ee,"Level: "+r(i.value.level),1))])]),Se,m(s,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:c})]),v.value?(t(),n("div",qe,[o("div",we,"+"+r(v.value.values[0])+" Mastery Assignment",1),o("div",Ae,[(t(!0),n(q,null,B(v.value.values[2],x=>(t(),$(C,{key:x,modelValue:u.value["masterySlot"+x],"onUpdate:modelValue":h=>u.value["masterySlot"+x]=h,class:"mastery-dropdown",options:e,onChange:E},{value:S(h=>[h.value?(t(),n("div",Ie,[m(d,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${h.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(t(),n("span",Ce,[m(d,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:S(h=>[o("div",We,[o("div",Me,r(h.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):f("",!0),p.value?(t(),n("div",Ve,[o("div",Be,"+"+r(p.value.values[0])+" Resistance Assignment",1),o("div",Le,[(t(!0),n(q,null,B(p.value.values[2],x=>(t(),$(C,{key:x,modelValue:u.value["resistanceSlot"+x],"onUpdate:modelValue":h=>u.value["resistanceSlot"+x]=h,class:"mastery-dropdown",options:e,onChange:k},{value:S(h=>[h.value?(t(),n("div",je,[m(d,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${h.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(t(),n("span",Te,[m(d,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:S(h=>[o("div",Re,[o("div",Oe,r(h.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):f("",!0)])]),_:1},8,["id","visible"])}}},De=D(Fe,[["__scopeId","data-v-d1df9473"]]);const z=_=>(ee("data-v-8918157b"),_=_(),te(),_),Ne={class:"flex equipment-slots-wrapper pr-3"},ze={key:0,class:"flex align-items-center justify-content-center"},Ue={key:1,class:"flex align-items-center justify-content-center"},Ge={class:"flex align-items-center justify-content-center"},He=z(()=>o("div",{class:"hover-icon search"},[o("i",{class:"pi pi-search"})],-1)),Je={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Ke=["onClick"],Pe=z(()=>o("i",{class:"pi pi-pencil"},null,-1)),Ye=[Pe],Qe=["onClick"],Xe=z(()=>o("i",{class:"pi pi-trash"},null,-1)),Ze=[Xe],et={key:0,class:"random-stat-icons-wrapper"},tt={key:1,class:"random-stat-icons-wrapper"},st={key:0,class:"item-card-tooltip"},it={class:"effect-header flex pt-2 px-1"},lt={class:"flex flex-column"},nt={class:"item-name mr-2"},at={class:"flex"},ot={key:0},ut={key:1},ct={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(_){const A=_,I=ne(),y=Z("itemFilters"),b=V(null),i=V(A.character);F(()=>A.character,()=>{i.value=A.character});const u=k=>{y.itemTypeFilters.forEach(g=>{g.validSlots.includes(X[k])?g.checked=!0:g.checked=!1})},e=(k,g,c)=>{b.value[k].open(g,c.target.getBoundingClientRect().left-200,c.target.getBoundingClientRect().bottom+10)},v=(k,g)=>{I.require({target:g.currentTarget,message:"Are you sure?",accept:()=>{i.value.equipment[k]=null}})},p=(k,g)=>{var c;return((c=i.value.equipment[k].equipEffects.find(a=>a.id===1068))==null?void 0:c[g])||null},E=(k,g)=>{var c;return((c=i.value.equipment[k].equipEffects.find(a=>a.id===1069))==null?void 0:c[g])||null};return(k,g)=>{const c=w("p-image"),a=w("p-button"),l=w("tippy"),d=w("p-confirmPopup");return t(),n("div",Ne,[(t(!0),n(q,null,B(L(X),(s,C,j)=>{var x,h,U;return t(),n(q,{key:s.id},[_.readOnly?(t(),n("div",{key:0,class:O(["equipment-display",{"has-item":i.value.equipment[s.id]!==null}])},[(h=(x=i.value)==null?void 0:x.equipment[s.id])!=null&&h.imageId?(t(),n("div",ze,[m(c,{src:`https://tmktahu.github.io/WakfuAssets/items/${(U=i.value.equipment[s.id])==null?void 0:U.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(t(),n("div",Ue,[m(c,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${s.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(t(),n(q,{key:1},[i.value.equipment[s.id]===null?(t(),$(a,{key:0,class:O(["equipment-button",{"has-item":i.value.equipment[s.id]!==null}]),onClick:W=>u(s.id)},{default:S(()=>[o("div",Ge,[He,m(c,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${s.id}.png`,"image-style":"width: 60px"},null,8,["src"])])]),_:2},1032,["class","onClick"])):(t(),$(l,{key:1,placement:"bottom",interactive:""},{content:S(()=>{var W,M,G,H,J,K,P,Y;return[i.value.equipment[s.id]?(t(),n("div",st,[o("div",it,[m(c,{src:`https://tmktahu.github.io/WakfuAssets/items/${(W=i.value.equipment[s.id])==null?void 0:W.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),o("div",lt,[o("div",nt,r((M=i.value.equipment[s.id])==null?void 0:M.name),1),o("div",at,[m(c,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(G=i.value.equipment[s.id])==null?void 0:G.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),m(c,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(J=(H=i.value.equipment[s.id])==null?void 0:H.type)==null?void 0:J.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),L(N).includes((P=(K=i.value.equipment[s.id])==null?void 0:K.type)==null?void 0:P.id)?(t(),n("div",ot,"Item Level: 50")):(t(),n("div",ut,"Level: "+r((Y=i.value.equipment[s.id])==null?void 0:Y.level),1))])])]),m(ve,{item:i.value.equipment[s.id]},null,8,["item"])])):f("",!0)]}),default:S(()=>{var W;return[o("div",{class:O(["equipment-button",{"has-item":i.value.equipment[s.id]!==null}])},[o("div",Je,[o("div",{class:"hover-icon edit",onClick:M=>e(j,s.id,M)},Ye,8,Ke),o("div",{class:"hover-icon remove",onClick:M=>v(s.id,M)},Ze,8,Qe),m(c,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(W=i.value.equipment[s.id])==null?void 0:W.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),p(s.id,"masterySlot1")!==null?(t(),n("div",et,[p(s.id,"masterySlot1")!==null?(t(),$(c,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${p(s.id,"masterySlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),p(s.id,"masterySlot2")!==null?(t(),$(c,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${p(s.id,"masterySlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),p(s.id,"masterySlot3")!==null?(t(),$(c,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${p(s.id,"masterySlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0)])):f("",!0),E(s.id,"resistanceSlot1")!==null?(t(),n("div",tt,[E(s.id,"resistanceSlot1")!==null?(t(),$(c,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(s.id,"resistanceSlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),E(s.id,"resistanceSlot2")!==null?(t(),$(c,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(s.id,"resistanceSlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),E(s.id,"resistanceSlot3")!==null?(t(),$(c,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(s.id,"resistanceSlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0)])):f("",!0)])],2)]}),_:2},1024)),m(De,{ref_for:!0,ref_key:"editEquipmentModal",ref:b},null,512)],64))],64)}),128)),m(d)])}}},dt=D(ct,[["__scopeId","data-v-8918157b"]]);export{dt as E,ve as I};
