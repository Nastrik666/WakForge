import{I as g,_ as K,K as ne,i as D,n as N,q as P,z as j,A as B,r as C,o as i,g as f,w as b,d as a,b as p,t as A,f as W,L as ee,c,F as R,e as U,k as $,p as te,h as se,y as ae,v as V}from"./index-f36c9276.js";import{I as oe}from"./ItemStatList-42c42413.js";const ce=()=>{const v=m=>{let k=I(m),_="https://www.wakfu.com/en/mmorpg/encyclopedia",u="";return m.type.validSlots.includes(g.FIRST_WEAPON.id)||m.type.validSlots.includes(g.SECOND_WEAPON.id)?u=`${_}/weapons/${k}`:m.type.validSlots.includes(g.PET.id)?u=`${_}/pets/${k}`:m.type.validSlots.includes(g.MOUNT.id)?u=`${_}/mounts/${k}`:m.type.validSlots.includes(g.ACCESSORY.id)?u=`${_}/accessories/${k}`:u=`${_}/armors/${k}`,u},I=m=>{let k=m.id,_=m.name.toLowerCase().replace(" ","-");return`${k}-${_}`};return{getItemEncyclopediaUrl:v}};const ie=v=>(te("data-v-898f7755"),v=v(),se(),v),ue=ie(()=>a("div",{class:"drag-bar"},null,-1)),re={class:"edit-item-modal-content flex flex-column pb-2"},pe={class:"header-area flex px-3 pt-2 pb-1"},de={class:"flex flex-column ml-1"},me={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},_e={class:"flex"},he={key:0},ve={key:1},fe=ie(()=>a("div",{class:"flex-grow-1"},null,-1)),ye={key:0,class:"random-mastery-section flex flex-column px-3"},ge={class:"text-center w-full text-lg mb-2 pt-2"},ke={class:"flex justify-content-center gap-2 px-3"},xe={key:0,class:"flex align-items-center"},$e={key:1},be={class:"flex align-items-center py-1 px-2"},Se={class:"capitalize"},Ee={key:1,class:"random-resistance-section flex flex-column px-3"},qe={class:"text-center w-full text-lg mb-2 pt-2"},we={class:"flex justify-content-center gap-2 px-3"},Ae={key:0,class:"flex align-items-center"},Ce={key:1},We={class:"flex align-items-center py-1 px-2"},Ie={class:"capitalize"},Oe={__name:"EditEquipmentModal",setup(v,{expose:I}){let m=ne();const k=D("currentCharacter"),_=N(!1),u=N(null),r=N({}),y=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],n=P(()=>{var o,t;return(t=(o=u.value)==null?void 0:o.equipEffects)==null?void 0:t.find(s=>s.id===1068)});j(n,()=>{B(()=>{r.value.masterySlot1=y.find(o=>{var t;return o.value===((t=n.value.masterySlot1)==null?void 0:t.type)||void 0}),r.value.masterySlot2=y.find(o=>{var t;return o.value===((t=n.value.masterySlot2)==null?void 0:t.type)||void 0}),r.value.masterySlot3=y.find(o=>{var t;return o.value===((t=n.value.masterySlot3)==null?void 0:t.type)||void 0})})});const S=P(()=>{var o,t;return(t=(o=u.value)==null?void 0:o.equipEffects)==null?void 0:t.find(s=>s.id===1069)});j(S,()=>{B(()=>{r.value.resistanceSlot1=y.find(o=>{var t;return o.value===((t=S.value.resistanceSlot1)==null?void 0:t.type)||void 0}),r.value.resistanceSlot2=y.find(o=>{var t;return o.value===((t=S.value.resistanceSlot2)==null?void 0:t.type)||void 0}),r.value.resistanceSlot3=y.find(o=>{var t;return o.value===((t=S.value.resistanceSlot3)==null?void 0:t.type)||void 0})})});const L=(o,t)=>{var l,h;let s=(h=(l=u.value)==null?void 0:l.equipEffects)==null?void 0:h.find(x=>x.id===1068);s[t]={type:r.value[t].value,value:n.value.values[0]},Object.keys(s).forEach(x=>{var d;x!==t&&((d=s[x])==null?void 0:d.type)===r.value[t].value&&(s[x]={type:y[0].value,value:[]},r.value[x]=y[0])})},M=()=>{Object.keys(r.value).forEach(o=>{var t,s;if(r.value[o]){let l=(s=(t=u.value)==null?void 0:t.equipEffects)==null?void 0:s.find(h=>h.id===1069);l[o]={type:r.value[o].value,value:S.value.values[0]}}})},E=(o,t,s)=>{u.value=k.value.equipment[o],_.value=!0,B(()=>{let l=document.getElementById(m);l.style.position="fixed",l.style.left=`${t}px`,l.style.top=`${s}px`})},q=()=>{_.value=!1};return I({open:E}),(o,t)=>{const s=C("p-image"),l=C("p-button"),h=C("p-dropdown"),x=C("p-dialog");return i(),f(x,{id:W(m),visible:_.value,"onUpdate:visible":t[0]||(t[0]=d=>_.value=d)},{header:b(()=>[ue]),default:b(()=>[a("div",re,[a("div",pe,[p(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${u.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),a("div",de,[a("div",me,A(u.value.name),1),a("div",_e,[p(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${u.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),p(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${u.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),W(ee).includes(u.value.type.id)?(i(),c("div",he,"Item Level: 50")):(i(),c("div",ve,"Level: "+A(u.value.level),1))])]),fe,p(l,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:q})]),n.value?(i(),c("div",ye,[a("div",ge,"+"+A(n.value.values[0])+" Mastery Assignment",1),a("div",ke,[(i(!0),c(R,null,U(n.value.values[2],d=>(i(),f(h,{key:d,modelValue:r.value["masterySlot"+d],"onUpdate:modelValue":e=>r.value["masterySlot"+d]=e,class:"mastery-dropdown",options:y,onChange:e=>L(e,"masterySlot"+d)},{value:b(e=>[e.value?(i(),c("div",xe,[p(s,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${e.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",$e,[p(s,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:b(e=>[a("div",be,[a("div",Se,A(e.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):$("",!0),S.value?(i(),c("div",Ee,[a("div",qe,"+"+A(S.value.values[0])+" Resistance Assignment",1),a("div",we,[(i(!0),c(R,null,U(S.value.values[2],d=>(i(),f(h,{key:d,modelValue:r.value["resistanceSlot"+d],"onUpdate:modelValue":e=>r.value["resistanceSlot"+d]=e,class:"mastery-dropdown",options:y,onChange:M},{value:b(e=>[e.value?(i(),c("div",Ae,[p(s,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${e.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",Ce,[p(s,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:b(e=>[a("div",We,[a("div",Ie,A(e.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):$("",!0)])]),_:1},8,["id","visible"])}}},Ne=K(Oe,[["__scopeId","data-v-898f7755"]]);const T=v=>(te("data-v-3b065159"),v=v(),se(),v),Re={class:"flex equipment-slots-wrapper pr-3"},Te={key:0,class:"flex align-items-center justify-content-center"},Le={key:1,class:"flex align-items-center justify-content-center"},Me={class:"flex align-items-center justify-content-center"},Be=T(()=>a("div",{class:"hover-icon search"},[a("i",{class:"pi pi-search"})],-1)),Ve={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},De=["onClick"],Pe=T(()=>a("i",{class:"pi pi-pencil"},null,-1)),je=[Pe],Ue=["onClick"],Fe=T(()=>a("i",{class:"pi pi-trash"},null,-1)),ze=[Fe],Ge={key:0,class:"random-stat-icons-wrapper"},Ye={key:1,class:"random-stat-icons-wrapper"},He={key:0,class:"item-card-tooltip"},Je={class:"effect-header flex pt-2 px-1"},Qe={class:"flex flex-column"},Xe={class:"item-name mr-2"},Ze={class:"flex"},Ke={key:0},et={key:1},tt=T(()=>a("div",{class:"flex-grow-1"},null,-1)),st={class:"flex"},it=T(()=>a("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),lt={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(v){const I=v,m=ae(),{getItemEncyclopediaUrl:k}=ce(),_=D("itemFilters"),u=N(null),r=P(()=>{let t=n.value.equipment[g.FIRST_WEAPON.id];return t?!!t.type.disabledSlots.includes(g.SECOND_WEAPON.id):!1}),y=D("masterData"),n=N(I.character);j(y,()=>{n.value=I.character});const S=t=>{_.itemTypeFilters.forEach(s=>{s.validSlots.includes(g[t])?s.checked=!0:s.checked=!1})},L=(t,s,l)=>{u.value[t].open(s,l.target.getBoundingClientRect().left-200,l.target.getBoundingClientRect().bottom+10)},M=(t,s)=>{m.require({target:s.currentTarget,message:"Are you sure?",accept:()=>{n.value.equipment[t]=null}})},E=(t,s)=>{var l;return((l=n.value.equipment[t].equipEffects.find(h=>h.id===1068))==null?void 0:l[s])||null},q=(t,s)=>{var l;return((l=n.value.equipment[t].equipEffects.find(h=>h.id===1069))==null?void 0:l[s])||null},o=t=>{let s=k(t);window.open(s,"_blank")};return(t,s)=>{const l=C("p-image"),h=C("p-button"),x=C("tippy"),d=C("p-confirmPopup");return i(),c("div",Re,[(i(!0),c(R,null,U(W(g),(e,nt,le)=>{var F,z,G;return i(),c(R,{key:e.id},[v.readOnly?(i(),c("div",{key:0,class:V(["equipment-display",{"has-item":n.value.equipment[e.id]!==null}])},[(z=(F=n.value)==null?void 0:F.equipment[e.id])!=null&&z.imageId?(i(),c("div",Te,[p(l,{src:`https://tmktahu.github.io/WakfuAssets/items/${(G=n.value.equipment[e.id])==null?void 0:G.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(i(),c("div",Le,[p(l,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(i(),c(R,{key:1},[n.value.equipment[e.id]===null?(i(),f(h,{key:0,class:V(["equipment-button",{"has-item":n.value.equipment[e.id]!==null,disabled:e.id===W(g).SECOND_WEAPON.id&&r.value}]),onClick:w=>S(e.id)},{default:b(()=>{var w;return[a("div",Me,[Be,e.id===W(g).SECOND_WEAPON.id&&r.value?(i(),f(l,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(w=n.value.equipment[W(g).FIRST_WEAPON.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(i(),f(l,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(i(),f(x,{key:1,placement:"bottom",interactive:""},{content:b(()=>{var w,O,Y,H,J,Q,X,Z;return[n.value.equipment[e.id]?(i(),c("div",He,[a("div",Je,[p(l,{src:`https://tmktahu.github.io/WakfuAssets/items/${(w=n.value.equipment[e.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),a("div",Qe,[a("div",Xe,A((O=n.value.equipment[e.id])==null?void 0:O.name),1),a("div",Ze,[p(l,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(Y=n.value.equipment[e.id])==null?void 0:Y.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),p(l,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(J=(H=n.value.equipment[e.id])==null?void 0:H.type)==null?void 0:J.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),W(ee).includes((X=(Q=n.value.equipment[e.id])==null?void 0:Q.type)==null?void 0:X.id)?(i(),c("div",Ke,"Item Level: 50")):(i(),c("div",et,"Level: "+A((Z=n.value.equipment[e.id])==null?void 0:Z.level),1))])]),tt,a("div",st,[p(x,{placement:"left"},{content:b(()=>[it]),default:b(()=>[p(h,{icon:"pi pi-question-circle",class:"equip-button",onClick:at=>o(n.value.equipment[e.id])},null,8,["onClick"])]),_:2},1024)])]),p(oe,{item:n.value.equipment[e.id]},null,8,["item"])])):$("",!0)]}),default:b(()=>{var w;return[a("div",{class:V(["equipment-button",{"has-item":n.value.equipment[e.id]!==null}])},[a("div",Ve,[a("div",{class:"hover-icon edit",onClick:O=>L(le,e.id,O)},je,8,De),a("div",{class:"hover-icon remove",onClick:O=>M(e.id,O)},ze,8,Ue),p(l,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(w=n.value.equipment[e.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),E(e.id,"masterySlot1")!==null?(i(),c("div",Ge,[E(e.id,"masterySlot1")!==null?(i(),f(l,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(e.id,"masterySlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),E(e.id,"masterySlot2")!==null?(i(),f(l,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(e.id,"masterySlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),E(e.id,"masterySlot3")!==null?(i(),f(l,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(e.id,"masterySlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0)])):$("",!0),q(e.id,"resistanceSlot1")!==null?(i(),c("div",Ye,[q(e.id,"resistanceSlot1")!==null?(i(),f(l,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(e.id,"resistanceSlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),q(e.id,"resistanceSlot2")!==null?(i(),f(l,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(e.id,"resistanceSlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),q(e.id,"resistanceSlot3")!==null?(i(),f(l,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(e.id,"resistanceSlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0)])):$("",!0)])],2)]}),_:2},1024)),p(Ne,{ref_for:!0,ref_key:"editEquipmentModal",ref:u},null,512)],64))],64)}),128)),p(d)])}}},ut=K(lt,[["__scopeId","data-v-3b065159"]]);export{ut as E,ce as u};
