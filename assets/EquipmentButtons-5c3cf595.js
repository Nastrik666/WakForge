import{I as S,_ as ee,P as ae,i as z,q as j,s as G,A as V,B as U,Q as ne,r as W,o as a,h as q,x as E,e as n,d,t as A,g as C,L as te,c as u,F as I,f as B,l as L,p as se,j as le,u as oe,w as F}from"./index-ffdb1681.js";import{I as ue}from"./ItemStatList-aefdb0cf.js";const ce=()=>{const f=_=>{let h=O(_),y="https://www.wakfu.com/en/mmorpg/encyclopedia",c="";return _.type.validSlots.includes(S.FIRST_WEAPON.id)||_.type.validSlots.includes(S.SECOND_WEAPON.id)?c=`${y}/weapons/${h}`:_.type.validSlots.includes(S.PET.id)?c=`${y}/pets/${h}`:_.type.validSlots.includes(S.MOUNT.id)?c=`${y}/mounts/${h}`:_.type.validSlots.includes(S.ACCESSORY.id)?c=`${y}/accessories/${h}`:c=`${y}/armors/${h}`,c},O=_=>{let h=_.id,y=_.name.toLowerCase().replace(" ","-");return`${h}-${y}`};return{getItemEncyclopediaUrl:f}};const ie=f=>(se("data-v-8262130a"),f=f(),le(),f),re=ie(()=>n("div",{class:"drag-bar"},null,-1)),pe={class:"edit-item-modal-content flex flex-column pb-2"},de={class:"header-area flex px-3 pt-2 pb-1"},me={class:"flex flex-column ml-1"},ve={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},_e={class:"flex"},he={key:0},ye={key:1},fe=ie(()=>n("div",{class:"flex-grow-1"},null,-1)),ge={key:0,class:"random-mastery-section flex flex-column px-3"},ke={class:"text-center w-full text-lg mb-2 pt-2"},xe={class:"flex justify-content-center gap-2 px-3"},$e={key:0,class:"flex align-items-center"},Se={key:1},be={class:"flex align-items-center py-1 px-2"},Ee={class:"capitalize"},we={key:1,class:"random-resistance-section flex flex-column px-3"},qe={class:"text-center w-full text-lg mb-2 pt-2"},Ae={class:"flex justify-content-center gap-2 px-3"},Ce={key:0,class:"flex align-items-center"},Ie={key:1},We={class:"flex align-items-center py-1 px-2"},Oe={class:"capitalize"},Ne={class:"flex justify-content-center mt-2"},Re={__name:"EditEquipmentModal",setup(f,{expose:O}){let _=ae();const h=z("currentCharacter"),y=j(!1),c=j(null),o=j({}),k=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],i=G(()=>{var s,e;return(e=(s=c.value)==null?void 0:s.equipEffects)==null?void 0:e.find(l=>l.id===1068)});V(i,()=>{U(()=>{N()})});const x=G(()=>{var s,e;return(e=(s=c.value)==null?void 0:s.equipEffects)==null?void 0:e.find(l=>l.id===1069)});V(x,()=>{U(()=>{R()})}),V(ne,()=>{N(),R()});const N=()=>{i.value!==void 0&&(o.value.masterySlot1=k.find(s=>{var e;return s.value===((e=i.value.masterySlot1)==null?void 0:e.type)}),o.value.masterySlot2=k.find(s=>{var e;return s.value===((e=i.value.masterySlot2)==null?void 0:e.type)}),o.value.masterySlot3=k.find(s=>{var e;return s.value===((e=i.value.masterySlot3)==null?void 0:e.type)}))},R=()=>{x.value!==void 0&&(o.value.resistanceSlot1=k.find(s=>{var e,l;return s.value===((l=(e=x.value)==null?void 0:e.resistanceSlot1)==null?void 0:l.type)}),o.value.resistanceSlot2=k.find(s=>{var e,l;return s.value===((l=(e=x.value)==null?void 0:e.resistanceSlot2)==null?void 0:l.type)}),o.value.resistanceSlot3=k.find(s=>{var e,l;return s.value===((l=(e=x.value)==null?void 0:e.resistanceSlot3)==null?void 0:l.type)}))},T=(s,e)=>{var t,b;let l=(b=(t=c.value)==null?void 0:t.equipEffects)==null?void 0:b.find(g=>g.id===1068);l[e]={type:o.value[e].value,value:i.value.values[0]},Object.keys(l).forEach(g=>{var p;g!==e&&((p=l[g])==null?void 0:p.type)===o.value[e].value&&(l[g]={type:k[0].value,value:[]},o.value[g]=k[0])})},M=()=>{Object.keys(o.value).forEach(s=>{var e,l;if(o.value[s]){let t=(l=(e=c.value)==null?void 0:e.equipEffects)==null?void 0:l.find(b=>b.id===1069);t[s]={type:o.value[s].value,value:x.value.values[0]}}})},P=()=>{Object.keys(h.value.equipment).forEach(s=>{h.value.equipment[s]!==null&&h.value.equipment[s].equipEffects.forEach(e=>{var l,t,b,g,p,r;e.id===1068&&i.value&&(e.masterySlot1={type:((l=o.value.masterySlot1)==null?void 0:l.value)||"empty",value:e.values[0]},e.masterySlot2={type:((t=o.value.masterySlot2)==null?void 0:t.value)||"empty",value:e.values[0]},e.masterySlot3={type:((b=o.value.masterySlot3)==null?void 0:b.value)||"empty",value:e.values[0]}),e.id===1069&&x.value&&(e.resistanceSlot1={type:((g=o.value.resistanceSlot1)==null?void 0:g.value)||"empty",value:e.values[0]},e.resistanceSlot2={type:((p=o.value.resistanceSlot2)==null?void 0:p.value)||"empty",value:e.values[0]},e.resistanceSlot3={type:((r=o.value.resistanceSlot3)==null?void 0:r.value)||"empty",value:e.values[0]})})})},m=(s,e,l)=>{c.value=h.value.equipment[s],y.value=!0,U(()=>{let t=document.getElementById(_);t.style.position="fixed",t.style.left=`${e}px`,t.style.top=`${l}px`,N(),R()})},v=()=>{y.value=!1};return O({open:m}),(s,e)=>{const l=W("p-image"),t=W("p-button"),b=W("p-dropdown"),g=W("p-dialog");return a(),q(g,{id:C(_),visible:y.value,"onUpdate:visible":e[0]||(e[0]=p=>y.value=p)},{header:E(()=>[re]),default:E(()=>[n("div",pe,[n("div",de,[d(l,{src:`https://tmktahu.github.io/WakfuAssets/items/${c.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),n("div",me,[n("div",ve,A(c.value.name),1),n("div",_e,[d(l,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${c.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),d(l,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${c.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),C(te).includes(c.value.type.id)?(a(),u("div",he,"Item Level: 50")):(a(),u("div",ye,"Level: "+A(c.value.level),1))])]),fe,d(t,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:v})]),i.value?(a(),u("div",ge,[n("div",ke,"+"+A(i.value.values[0])+" Mastery Assignment",1),n("div",xe,[(a(!0),u(I,null,B(i.value.values[2],p=>(a(),q(b,{key:p,modelValue:o.value["masterySlot"+p],"onUpdate:modelValue":r=>o.value["masterySlot"+p]=r,class:"mastery-dropdown",options:k,onChange:r=>T(r,"masterySlot"+p)},{value:E(r=>[r.value?(a(),u("div",$e,[d(l,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${r.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(a(),u("span",Se,[d(l,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(r=>[n("div",be,[n("div",Ee,A(r.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):L("",!0),x.value?(a(),u("div",we,[n("div",qe,"+"+A(x.value.values[0])+" Resistance Assignment",1),n("div",Ae,[(a(!0),u(I,null,B(x.value.values[2],p=>(a(),q(b,{key:p,modelValue:o.value["resistanceSlot"+p],"onUpdate:modelValue":r=>o.value["resistanceSlot"+p]=r,class:"mastery-dropdown",options:k,onChange:M},{value:E(r=>[r.value?(a(),u("div",Ce,[d(l,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${r.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(a(),u("span",Ie,[d(l,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(r=>[n("div",We,[n("div",Oe,A(r.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):L("",!0),n("div",Ne,[d(t,{class:"py-2",label:"Apply to all Items",onClick:P})])])]),_:1},8,["id","visible"])}}},Te=ee(Re,[["__scopeId","data-v-8262130a"]]);const D=f=>(se("data-v-13a209fe"),f=f(),le(),f),Me={class:"flex equipment-slots-wrapper"},je={key:0,class:"flex align-items-center justify-content-center"},Be={key:1,class:"flex align-items-center justify-content-center"},Le={class:"flex align-items-center justify-content-center"},De=D(()=>n("div",{class:"hover-icon search"},[n("i",{class:"pi pi-search"})],-1)),Ve={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Pe=["onClick"],Ue=D(()=>n("i",{class:"pi pi-pencil"},null,-1)),Fe=[Ue],ze=["onClick"],Ge=D(()=>n("i",{class:"pi pi-trash"},null,-1)),Qe=[Ge],Ye={key:0,class:"random-stat-icons-wrapper"},He={key:1,class:"random-stat-icons-wrapper"},Je={key:0,class:"item-card-tooltip"},Xe={class:"effect-header flex pt-2 px-1"},Ze={class:"flex flex-column"},Ke={class:"item-name mr-2"},et={class:"flex"},tt={key:0},st={key:1},lt=D(()=>n("div",{class:"flex-grow-1"},null,-1)),it={class:"flex"},at=D(()=>n("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),nt={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(f){const O=f,_=oe(),{getItemEncyclopediaUrl:h}=ce(),y=z("itemFilters"),c=j(null),o=G(()=>{let m=i.value.equipment[S.FIRST_WEAPON.id];return m?!!m.type.disabledSlots.includes(S.SECOND_WEAPON.id):!1}),k=z("masterData"),i=j(O.character);V(k,()=>{i.value=O.character});const x=m=>{y.itemTypeFilters.forEach(v=>{v.validSlots.includes(S[m])?v.checked=!0:v.checked=!1})},N=(m,v,s)=>{c.value[m].open(v,s.target.getBoundingClientRect().left-200,s.target.getBoundingClientRect().bottom+10)},R=(m,v)=>{_.require({target:v.currentTarget,message:"Are you sure?",accept:()=>{i.value.equipment[m]=null}})},T=m=>i.value.equipment[m].equipEffects.find(v=>v.id===1068)||null,M=m=>i.value.equipment[m].equipEffects.find(v=>v.id===1069)||null,P=m=>{let v=h(m);window.open(v,"_blank")};return(m,v)=>{const s=W("p-image"),e=W("p-button"),l=W("tippy");return a(),u("div",Me,[(a(!0),u(I,null,B(C(S),(t,b,g)=>{var p,r,Q;return a(),u(I,{key:t.id},[f.readOnly?(a(),u("div",{key:0,class:F(["equipment-display",{"has-item":i.value.equipment[t.id]!==null}])},[(r=(p=i.value)==null?void 0:p.equipment[t.id])!=null&&r.imageId?(a(),u("div",je,[d(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${(Q=i.value.equipment[t.id])==null?void 0:Q.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(a(),u("div",Be,[d(s,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${t.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(a(),u(I,{key:1},[i.value.equipment[t.id]===null?(a(),q(e,{key:0,class:F(["equipment-button",{"has-item":i.value.equipment[t.id]!==null,disabled:t.id===C(S).SECOND_WEAPON.id&&o.value}]),onClick:w=>x(t.id)},{default:E(()=>{var w;return[n("div",Le,[De,t.id===C(S).SECOND_WEAPON.id&&o.value?(a(),q(s,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(w=i.value.equipment[C(S).FIRST_WEAPON.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(a(),q(s,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${t.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(a(),q(l,{key:1,placement:"bottom",interactive:""},{content:E(()=>{var w,$,Y,H,J,X,Z,K;return[i.value.equipment[t.id]?(a(),u("div",Je,[n("div",Xe,[d(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${(w=i.value.equipment[t.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),n("div",Ze,[n("div",Ke,A(($=i.value.equipment[t.id])==null?void 0:$.name),1),n("div",et,[d(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(Y=i.value.equipment[t.id])==null?void 0:Y.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),d(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(J=(H=i.value.equipment[t.id])==null?void 0:H.type)==null?void 0:J.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),C(te).includes((Z=(X=i.value.equipment[t.id])==null?void 0:X.type)==null?void 0:Z.id)?(a(),u("div",tt,"Item Level: 50")):(a(),u("div",st,"Level: "+A((K=i.value.equipment[t.id])==null?void 0:K.level),1))])]),lt,n("div",it,[d(l,{placement:"left"},{content:E(()=>[at]),default:E(()=>[d(e,{icon:"pi pi-question-circle",class:"equip-button",onClick:ot=>P(i.value.equipment[t.id])},null,8,["onClick"])]),_:2},1024)])]),d(ue,{item:i.value.equipment[t.id]},null,8,["item"])])):L("",!0)]}),default:E(()=>{var w;return[n("div",{class:F(["equipment-button",{"has-item":i.value.equipment[t.id]!==null}])},[n("div",Ve,[n("div",{class:"hover-icon edit",onClick:$=>N(g,t.id,$)},Fe,8,Pe),n("div",{class:"hover-icon remove",onClick:$=>R(t.id,$)},Qe,8,ze),d(s,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(w=i.value.equipment[t.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),T(t.id)!==null?(a(),u("div",Ye,[(a(!0),u(I,null,B(T(t.id).values[2],$=>(a(),q(s,{key:$,src:`https://tmktahu.github.io/WakfuAssets/statistics/${T(t.id)[`masterySlot${$}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):L("",!0),M(t.id)!==null?(a(),u("div",He,[(a(!0),u(I,null,B(M(t.id).values[2],$=>(a(),q(s,{key:$,src:`https://tmktahu.github.io/WakfuAssets/statistics/${M(t.id)[`resistanceSlot${$}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):L("",!0)])],2)]}),_:2},1024)),d(Te,{ref_for:!0,ref_key:"editEquipmentModal",ref:c},null,512)],64))],64)}),128))])}}},rt=ee(nt,[["__scopeId","data-v-13a209fe"]]);export{rt as E,ce as u};
