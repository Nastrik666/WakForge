import{O as S,_ as z,o as i,h as c,F as A,m as W,a0 as oe,t as x,j as n,l as T,G as D,H as U,N as Y,v as ue,i as P,r as M,f as F,a1 as te,a2 as se,g as O,n as w,w as E,k as h,q as I,K as le,s as ie,x as ae,b as ce,a as re,D as de,E as pe}from"./index-024b0735.js";const me=()=>{const m=y=>{let v=C(y),_="https://www.wakfu.com/en/mmorpg/encyclopedia",u="";return y.type.validSlots.includes(S.FIRST_WEAPON.id)||y.type.validSlots.includes(S.SECOND_WEAPON.id)?u=`${_}/weapons/${v}`:y.type.validSlots.includes(S.PET.id)?u=`${_}/pets/${v}`:y.type.validSlots.includes(S.MOUNT.id)?u=`${_}/mounts/${v}`:y.type.validSlots.includes(S.ACCESSORY.id)?u=`${_}/accessories/${v}`:u=`${_}/armors/${v}`,u},C=y=>{let v=y.id,_=y.name.toLowerCase().replace(" ","-");return`${v}-${_}`};return{getItemEncyclopediaUrl:m}};const ve={key:0},_e={key:1},he={key:2},ye={key:3},fe={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1}},setup(m){let C=m;const y=u=>!![400].includes(u.id),v=u=>{let o=Object.keys(U).find(a=>U[a].rawIds.includes(u));return o===void 0?null:U[o]},_=u=>{let o=u.values[0],a=0;return Y.includes(C.item.type.id)?a=o+50*u.values[1]:a=o,Math.floor(a)};return(u,o)=>(i(),c("div",{class:D(`${m.cardMode?"effects-wrapper flex flex-wrap":"tooltip-effect-list"}`)},[(i(!0),c(A,null,W(m.item.equipEffects,(a,$)=>(i(),c(A,{key:`${m.item.id}-${a.id}-${$}`},[v(a.id)&&!y(a)?(i(),c("div",{key:0,class:"effect-line px-2 py-1",style:oe({width:m.cardMode&&!a.longEntry?"50%":"100%"})},[a.id===1068?(i(),c("div",ve,"+"+x(a.values[0])+" Mastery of "+x(a.values[2])+" random elements",1)):a.id===1069?(i(),c("div",_e," +"+x(a.values[0])+" Resistance of "+x(a.values[2])+" random elements ",1)):a.id===304?(i(),c("div",he,"Adds the "+x(u.$t(`states.${a.values[0]}`))+" state",1)):(i(),c("div",ye,[n("span",null,x(_(a)>0?"+":"")+x(_(a)),1),n("span",null,x(u.$t(v(a.id).text).charAt(0)==="%"?u.$t(v(a.id).text):" "+u.$t(v(a.id).text)),1)]))],4)):T("",!0)],64))),128))],2))}},ge=z(fe,[["__scopeId","data-v-41115098"]]);const ne=m=>(ie("data-v-76befabf"),m=m(),ae(),m),ke=ne(()=>n("div",{class:"drag-bar"},null,-1)),xe={class:"edit-item-modal-content flex flex-column pb-2"},$e={class:"header-area flex px-3 pt-2 pb-1"},be={class:"flex flex-column ml-1"},Se={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},Ee={class:"flex"},we={key:0},Ae={key:1},Ce=ne(()=>n("div",{class:"flex-grow-1"},null,-1)),Ie={key:0,class:"random-mastery-section flex flex-column px-3"},Oe={class:"text-center w-full text-lg mb-2 pt-2"},We={class:"flex justify-content-center gap-2 px-3"},Te={key:0,class:"flex align-items-center"},Me={key:1},Re={class:"flex align-items-center py-1 px-2"},Ne={class:"capitalize"},qe={key:1,class:"random-resistance-section flex flex-column px-3"},Le={class:"text-center w-full text-lg mb-2 pt-2"},De={class:"flex justify-content-center gap-2 px-3"},je={key:0,class:"flex align-items-center"},Ve={key:1},Be={class:"flex align-items-center py-1 px-2"},Ue={class:"capitalize"},Pe={class:"flex justify-content-center mt-2"},Fe={__name:"EditEquipmentModal",setup(m,{expose:C}){let y=ue();const v=P("currentCharacter"),_=M(!1),u=M(null),o=M({}),a=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],$=F(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.equipEffects)==null?void 0:e.find(t=>t.id===1068)}),g=F(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.equipEffects)==null?void 0:e.find(t=>t.id===1069)});te.on(se.UPDATE_RAND_ELEM_SELECTORS,()=>{r(),L()});const r=()=>{_.value&&$.value!==void 0&&(o.value.masterySlot1=a.find(s=>{var e;return s.value===((e=$.value.masterySlot1)==null?void 0:e.type)}),o.value.masterySlot2=a.find(s=>{var e;return s.value===((e=$.value.masterySlot2)==null?void 0:e.type)}),o.value.masterySlot3=a.find(s=>{var e;return s.value===((e=$.value.masterySlot3)==null?void 0:e.type)}))},L=()=>{_.value&&g.value!==void 0&&(o.value.resistanceSlot1=a.find(s=>{var e,t;return s.value===((t=(e=g.value)==null?void 0:e.resistanceSlot1)==null?void 0:t.type)}),o.value.resistanceSlot2=a.find(s=>{var e,t;return s.value===((t=(e=g.value)==null?void 0:e.resistanceSlot2)==null?void 0:t.type)}),o.value.resistanceSlot3=a.find(s=>{var e,t;return s.value===((t=(e=g.value)==null?void 0:e.resistanceSlot3)==null?void 0:t.type)}))},j=(s,e)=>{var d,b;let t=(b=(d=u.value)==null?void 0:d.equipEffects)==null?void 0:b.find(l=>l.id===1068);t[e]={type:o.value[e].value,value:$.value.values[0]},Object.keys(t).forEach(l=>{var f;l!==e&&((f=t[l])==null?void 0:f.type)===o.value[e].value&&(t[l]={type:a[0].value,value:[]},o.value[l]=a[0])})},V=()=>{Object.keys(o.value).forEach(s=>{var e,t;if(o.value[s]){let d=(t=(e=u.value)==null?void 0:e.equipEffects)==null?void 0:t.find(b=>b.id===1069);d[s]={type:o.value[s].value,value:g.value.values[0]}}})},R=()=>{Object.keys(v.value.equipment).forEach(s=>{v.value.equipment[s]!==null&&v.value.equipment[s].equipEffects.forEach(e=>{var t,d,b,l,f,p;e.id===1068&&$.value&&(e.values[2]>=1&&(e.masterySlot1={type:((t=o.value.masterySlot1)==null?void 0:t.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.masterySlot2={type:((d=o.value.masterySlot2)==null?void 0:d.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.masterySlot3={type:((b=o.value.masterySlot3)==null?void 0:b.value)||"empty",value:e.values[0]})),e.id===1069&&g.value&&(e.values[2]>=1&&(e.resistanceSlot1={type:((l=o.value.resistanceSlot1)==null?void 0:l.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.resistanceSlot2={type:((f=o.value.resistanceSlot2)==null?void 0:f.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.resistanceSlot3={type:((p=o.value.resistanceSlot3)==null?void 0:p.value)||"empty",value:e.values[0]}))})}),te.emit(se.UPDATE_RAND_ELEM_SELECTORS)},N=(s,e,t)=>{u.value=v.value.equipment[s],_.value=!0,le(()=>{let d=document.getElementById(y);d.style.position="fixed",d.style.left=`${e}px`,d.style.top=`${t}px`,r(),L()})},B=()=>{_.value=!1};return C({open:N}),(s,e)=>{const t=O("p-image"),d=O("p-button"),b=O("p-dropdown"),l=O("p-dialog");return i(),w(l,{id:I(y),visible:_.value,"onUpdate:visible":e[0]||(e[0]=f=>_.value=f)},{header:E(()=>[ke]),default:E(()=>[n("div",xe,[n("div",$e,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${u.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),n("div",be,[n("div",Se,x(u.value.name),1),n("div",Ee,[h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${u.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${u.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),I(Y).includes(u.value.type.id)?(i(),c("div",we,"Item Level: 50")):(i(),c("div",Ae,"Level: "+x(u.value.level),1))])]),Ce,h(d,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:B})]),$.value?(i(),c("div",Ie,[n("div",Oe,"+"+x($.value.values[0])+" Mastery Assignment",1),n("div",We,[(i(!0),c(A,null,W($.value.values[2],f=>(i(),w(b,{key:f,modelValue:o.value["masterySlot"+f],"onUpdate:modelValue":p=>o.value["masterySlot"+f]=p,class:"mastery-dropdown","option-label":"label",options:a,onChange:p=>j(p,"masterySlot"+f)},{value:E(p=>[p.value?(i(),c("div",Te,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${p.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",Me,[h(t,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(p=>[n("div",Re,[n("div",Ne,x(p.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):T("",!0),g.value?(i(),c("div",qe,[n("div",Le,"+"+x(g.value.values[0])+" Resistance Assignment",1),n("div",De,[(i(!0),c(A,null,W(g.value.values[2],f=>(i(),w(b,{key:f,modelValue:o.value["resistanceSlot"+f],"onUpdate:modelValue":p=>o.value["resistanceSlot"+f]=p,class:"mastery-dropdown",options:a,"option-label":"label",onChange:V},{value:E(p=>[p.value?(i(),c("div",je,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${p.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",Ve,[h(t,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(p=>[n("div",Be,[n("div",Ue,x(p.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):T("",!0),n("div",Pe,[h(d,{class:"py-2",label:"Apply to all Items",onClick:R})])])]),_:1},8,["id","visible"])}}},ze=z(Fe,[["__scopeId","data-v-76befabf"]]);const q=m=>(ie("data-v-7cd33f43"),m=m(),ae(),m),Ye={class:"flex equipment-slots-wrapper"},Ge={key:0,class:"flex align-items-center justify-content-center"},He={key:1,class:"flex align-items-center justify-content-center"},Je={class:"flex align-items-center justify-content-center"},Qe=q(()=>n("div",{class:"hover-icon search"},[n("i",{class:"pi pi-search"})],-1)),Xe={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Ze=["onClick"],Ke=q(()=>n("i",{class:"pi pi-pencil"},null,-1)),et=[Ke],tt=["onClick"],st=q(()=>n("i",{class:"pi pi-trash"},null,-1)),lt=[st],it={key:0,class:"random-stat-icons-wrapper"},at={key:1,class:"random-stat-icons-wrapper"},nt={key:0,class:"item-card-tooltip"},ot={class:"effect-header flex pt-2 px-1"},ut={class:"flex flex-column"},ct={class:"item-name mr-2"},rt={class:"flex"},dt={key:0},pt={key:1},mt=q(()=>n("div",{class:"flex-grow-1"},null,-1)),vt={class:"flex"},_t=q(()=>n("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),ht={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(m){const{t:C}=ce();let y=m;const v=re(),{getItemEncyclopediaUrl:_}=me(),u=P("itemFilters"),o=M(null),a=F(()=>{let s=g.value.equipment[S.FIRST_WEAPON.id];return s?!!s.type.disabledSlots.includes(S.SECOND_WEAPON.id):!1}),$=P("masterData"),g=M(y.character),r=M({});de($,pe.debounce(()=>{le(()=>{var s;g.value=y.character,r.value=(s=g.value)==null?void 0:s.equipment})},100),{immediate:!0});const L=s=>{u.itemTypeFilters.forEach(e=>{e.validSlots.includes(S[s])?e.checked=!0:e.checked=!1})},j=(s,e,t)=>{o.value[s].open(e,t.target.getBoundingClientRect().left-200,t.target.getBoundingClientRect().bottom+10)},V=(s,e)=>{v.require({group:"popup",target:e.currentTarget,message:C("confirms.areYouSure"),accept:()=>{g.value.equipment[s]=null}})},R=s=>{var e,t;return((t=(e=g.value.equipment[s])==null?void 0:e.equipEffects)==null?void 0:t.find(d=>d.id===1068))||null},N=s=>{var e,t;return((t=(e=g.value.equipment[s])==null?void 0:e.equipEffects)==null?void 0:t.find(d=>d.id===1069))||null},B=s=>{let e=_(s);window.open(e,"_blank")};return(s,e)=>{const t=O("p-image"),d=O("p-button"),b=O("tippy");return i(),c("div",Ye,[(i(!0),c(A,null,W(I(S),(l,f,p)=>{var G,H;return i(),c(A,{key:l.id},[m.readOnly?(i(),c("div",{key:0,class:D(["equipment-display",{"has-item":r.value[l.id]!==null}])},[(G=r.value[l.id])!=null&&G.imageId?(i(),c("div",Ge,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(H=r.value[l.id])==null?void 0:H.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(i(),c("div",He,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${l.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(i(),c(A,{key:1},[r.value[l.id]===null||r.value[l.id]===void 0?(i(),w(d,{key:0,class:D(["equipment-button",{"has-item":r.value[l.id]!==null,disabled:l.id===I(S).SECOND_WEAPON.id&&a.value}]),onClick:k=>L(l.id)},{default:E(()=>{var k;return[n("div",Je,[Qe,l.id===I(S).SECOND_WEAPON.id&&a.value?(i(),w(t,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(k=r.value[I(S).FIRST_WEAPON.id])==null?void 0:k.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(i(),w(t,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${l.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(i(),w(b,{key:1,placement:"bottom",interactive:"",duration:"0"},{content:E(()=>{var k,J,Q,X,Z,K,ee;return[r.value[l.id]?(i(),c("div",nt,[n("div",ot,[h(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(k=r.value[l.id])==null?void 0:k.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),n("div",ut,[n("div",ct,x(s.$t(`items.${r.value[l.id].id}`)),1),n("div",rt,[h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(J=r.value[l.id])==null?void 0:J.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),h(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(X=(Q=r.value[l.id])==null?void 0:Q.type)==null?void 0:X.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),I(Y).includes((K=(Z=r.value[l.id])==null?void 0:Z.type)==null?void 0:K.id)?(i(),c("div",dt,"Item Level: 50")):(i(),c("div",pt,"Level: "+x((ee=r.value[l.id])==null?void 0:ee.level),1))])]),mt,n("div",vt,[h(b,{placement:"left"},{content:E(()=>[_t]),default:E(()=>[h(d,{icon:"pi pi-question-circle",class:"equip-button",onClick:yt=>B(r.value[l.id])},null,8,["onClick"])]),_:2},1024)])]),h(ge,{item:r.value[l.id]},null,8,["item"])])):T("",!0)]}),default:E(()=>[n("div",{class:D(["equipment-button",{"has-item":r.value[l.id]!==null}])},[n("div",Xe,[n("div",{class:"hover-icon edit",onClick:k=>j(p,l.id,k)},et,8,Ze),n("div",{class:"hover-icon remove",onClick:k=>V(l.id,k)},lt,8,tt),h(t,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${r.value[l.id].imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),R(l.id)!==null?(i(),c("div",it,[(i(!0),c(A,null,W(R(l.id).values[2],k=>(i(),w(t,{key:k,src:`https://tmktahu.github.io/WakfuAssets/statistics/${R(l.id)[`masterySlot${k}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):T("",!0),N(l.id)!==null?(i(),c("div",at,[(i(!0),c(A,null,W(N(l.id).values[2],k=>(i(),w(t,{key:k,src:`https://tmktahu.github.io/WakfuAssets/statistics/${N(l.id)[`resistanceSlot${k}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):T("",!0)])],2)]),_:2},1024)),h(ze,{ref_for:!0,ref_key:"editEquipmentModal",ref:o},null,512)],64))],64)}),128))])}}},gt=z(ht,[["__scopeId","data-v-7cd33f43"]]),kt="/assets/addCompanion-b3d0cb0d.png";export{gt as E,ge as I,kt as a,me as u};
