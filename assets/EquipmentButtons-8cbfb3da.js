import{_ as z,o as s,c as n,F as w,e as T,t as r,d as a,k as f,H as ne,E as L,L as U,J as ae,i as D,n as N,q as F,z as P,A as R,r as I,g,w as q,b as p,f as M,p as se,h as ie,y as oe,v as j,I as C}from"./index-cb659849.js";const ue={key:0,class:"tooltip-effect-list"},ce={key:0,class:"effect-line px-2 py-1"},re={key:0},de={key:1},pe={key:2},me={key:1,class:"effects-wrapper flex flex-wrap"},_e={key:0},he={key:1},ve={key:2},ye={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1}},setup(d){const O=d,W=c=>!![400].includes(c.id),v=c=>{let o=Object.keys(L).find(e=>L[e].rawId===c);return o===void 0?null:L[o]},x=c=>{let o=c.values[0],e=0;return U.includes(O.item.type.id)?e=o+50*c.values[1]:e=o,Math.floor(e)};return(c,o)=>d.cardMode?(s(),n("div",me,[(s(!0),n(w,null,T(d.item.equipEffects,e=>{var m;return s(),n(w,{key:e.id},[v(e.id)&&!W(e)?(s(),n("div",{key:0,class:"effect-line pl-2 py-1",style:ne({width:e.longEntry?"100%":"50%"})},[e.id===1068?(s(),n("div",_e,"+"+r(e.values[0])+" Mastery of "+r(e.values[2])+" random elements",1)):e.id===1069?(s(),n("div",he," +"+r(e.values[0])+" Resistance of "+r(e.values[2])+" random elements ",1)):(s(),n("div",ve,[a("span",null,r((m=v(e.id))!=null&&m.isNegative?"-":"+")+r(x(e)),1),a("span",null,r(v(e.id).text.charAt(0)==="%"?v(e.id).text:" "+v(e.id).text),1)]))],4)):f("",!0)],64)}),128))])):(s(),n("div",ue,[(s(!0),n(w,null,T(d.item.equipEffects,(e,m)=>{var y;return s(),n(w,{key:`${d.item.id}-${e.id}-${m}`},[v(e.id)&&!W(e)?(s(),n("div",ce,[e.id===1068?(s(),n("div",re,"+"+r(e.values[0])+" Mastery of "+r(e.values[2])+" random elements",1)):e.id===1069?(s(),n("div",de," +"+r(e.values[0])+" Resistance of "+r(e.values[2])+" random elements ",1)):(s(),n("div",pe,[a("span",null,r((y=v(e.id))!=null&&y.isNegative?"-":"+")+r(x(e)),1),a("span",null,r(v(e.id).text.charAt(0)==="%"?v(e.id).text:" "+v(e.id).text),1)]))])):f("",!0)],64)}),128))]))}},ge=z(ye,[["__scopeId","data-v-9820680e"]]);const le=d=>(se("data-v-d1df9473"),d=d(),ie(),d),fe=le(()=>a("div",{class:"drag-bar"},null,-1)),ke={class:"edit-item-modal-content flex flex-column pb-2"},xe={class:"header-area flex px-3 pt-2 pb-1"},$e={class:"flex flex-column ml-1"},Ee={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},be={class:"flex"},Se={key:0},qe={key:1},we=le(()=>a("div",{class:"flex-grow-1"},null,-1)),Ae={key:0,class:"random-mastery-section flex flex-column px-3"},Ie={class:"text-center w-full text-lg mb-2 pt-2"},We={class:"flex justify-content-center gap-2 px-3"},Ce={key:0,class:"flex align-items-center"},Me={key:1},Oe={class:"flex align-items-center"},Ve={class:"capitalize"},Ne={key:1,class:"random-resistance-section flex flex-column px-3"},Te={class:"text-center w-full text-lg mb-2 pt-2"},Be={class:"flex justify-content-center gap-2 px-3"},Le={key:0,class:"flex align-items-center"},Re={key:1},je={class:"flex align-items-center"},De={class:"capitalize"},Fe={__name:"EditEquipmentModal",setup(d,{expose:O}){let W=ae();const v=D("currentCharacter"),x=N(!1),c=N(null),o=N({}),e=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],m=F(()=>{var i,t;return(t=(i=c.value)==null?void 0:i.equipEffects)==null?void 0:t.find(u=>u.id===1068)});P(m,()=>{R(()=>{o.value.masterySlot1=e.find(i=>{var t;return i.value===((t=m.value.masterySlot1)==null?void 0:t.type)||void 0}),o.value.masterySlot2=e.find(i=>{var t;return i.value===((t=m.value.masterySlot2)==null?void 0:t.type)||void 0}),o.value.masterySlot3=e.find(i=>{var t;return i.value===((t=m.value.masterySlot3)==null?void 0:t.type)||void 0})})});const y=F(()=>{var i,t;return(t=(i=c.value)==null?void 0:i.equipEffects)==null?void 0:t.find(u=>u.id===1069)});P(y,()=>{R(()=>{o.value.resistanceSlot1=e.find(i=>{var t;return i.value===((t=y.value.resistanceSlot1)==null?void 0:t.type)||void 0}),o.value.resistanceSlot2=e.find(i=>{var t;return i.value===((t=y.value.resistanceSlot2)==null?void 0:t.type)||void 0}),o.value.resistanceSlot3=e.find(i=>{var t;return i.value===((t=y.value.resistanceSlot3)==null?void 0:t.type)||void 0})})});const B=()=>{Object.keys(o.value).forEach(i=>{var t,u;if(o.value[i]){let k=(u=(t=c.value)==null?void 0:t.equipEffects)==null?void 0:u.find(A=>A.id===1068);k[i]={type:o.value[i].value,value:m.value.values[0]}}})},E=()=>{Object.keys(o.value).forEach(i=>{var t,u;if(o.value[i]){let k=(u=(t=c.value)==null?void 0:t.equipEffects)==null?void 0:u.find(A=>A.id===1069);k[i]={type:o.value[i].value,value:y.value.values[0]}}})},b=(i,t,u)=>{c.value=v.value.equipment[i],x.value=!0,R(()=>{let k=document.getElementById(W);k.style.position="fixed",k.style.left=`${t}px`,k.style.top=`${u}px`})},_=()=>{x.value=!1};return O({open:b}),(i,t)=>{const u=I("p-image"),k=I("p-button"),A=I("p-dropdown"),l=I("p-dialog");return s(),g(l,{id:M(W),visible:x.value,"onUpdate:visible":t[0]||(t[0]=$=>x.value=$)},{header:q(()=>[fe]),default:q(()=>[a("div",ke,[a("div",xe,[p(u,{src:`https://tmktahu.github.io/WakfuAssets/items/${c.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),a("div",$e,[a("div",Ee,r(c.value.name),1),a("div",be,[p(u,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${c.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),p(u,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${c.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),M(U).includes(c.value.type.id)?(s(),n("div",Se,"Item Level: 50")):(s(),n("div",qe,"Level: "+r(c.value.level),1))])]),we,p(k,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:_})]),m.value?(s(),n("div",Ae,[a("div",Ie,"+"+r(m.value.values[0])+" Mastery Assignment",1),a("div",We,[(s(!0),n(w,null,T(m.value.values[2],$=>(s(),g(A,{key:$,modelValue:o.value["masterySlot"+$],"onUpdate:modelValue":h=>o.value["masterySlot"+$]=h,class:"mastery-dropdown",options:e,onChange:B},{value:q(h=>[h.value?(s(),n("div",Ce,[p(u,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${h.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(s(),n("span",Me,[p(u,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:q(h=>[a("div",Oe,[a("div",Ve,r(h.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):f("",!0),y.value?(s(),n("div",Ne,[a("div",Te,"+"+r(y.value.values[0])+" Resistance Assignment",1),a("div",Be,[(s(!0),n(w,null,T(y.value.values[2],$=>(s(),g(A,{key:$,modelValue:o.value["resistanceSlot"+$],"onUpdate:modelValue":h=>o.value["resistanceSlot"+$]=h,class:"mastery-dropdown",options:e,onChange:E},{value:q(h=>[h.value?(s(),n("div",Le,[p(u,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${h.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(s(),n("span",Re,[p(u,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:q(h=>[a("div",je,[a("div",De,r(h.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):f("",!0)])]),_:1},8,["id","visible"])}}},Pe=z(Fe,[["__scopeId","data-v-d1df9473"]]);const H=d=>(se("data-v-6f0a642e"),d=d(),ie(),d),ze={class:"flex equipment-slots-wrapper pr-3"},Ue={key:0,class:"flex align-items-center justify-content-center"},He={key:1,class:"flex align-items-center justify-content-center"},Je={class:"flex align-items-center justify-content-center"},Ke=H(()=>a("div",{class:"hover-icon search"},[a("i",{class:"pi pi-search"})],-1)),Ye={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Ge=["onClick"],Qe=H(()=>a("i",{class:"pi pi-pencil"},null,-1)),Xe=[Qe],Ze=["onClick"],et=H(()=>a("i",{class:"pi pi-trash"},null,-1)),tt=[et],st={key:0,class:"random-stat-icons-wrapper"},it={key:1,class:"random-stat-icons-wrapper"},lt={key:0,class:"item-card-tooltip"},nt={class:"effect-header flex pt-2 px-1"},at={class:"flex flex-column"},ot={class:"item-name mr-2"},ut={class:"flex"},ct={key:0},rt={key:1},dt={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(d){const O=d,W=oe(),v=D("itemFilters"),x=N(null),c=F(()=>{let _=e.value.equipment[C.FIRST_WEAPON.id];return _?!!_.type.disabledSlots.includes(C.SECOND_WEAPON.id):!1}),o=D("masterData"),e=N(O.character);P(o,()=>{e.value=O.character});const m=_=>{v.itemTypeFilters.forEach(i=>{i.validSlots.includes(C[_])?i.checked=!0:i.checked=!1})},y=(_,i,t)=>{x.value[_].open(i,t.target.getBoundingClientRect().left-200,t.target.getBoundingClientRect().bottom+10)},B=(_,i)=>{W.require({target:i.currentTarget,message:"Are you sure?",accept:()=>{e.value.equipment[_]=null}})},E=(_,i)=>{var t;return((t=e.value.equipment[_].equipEffects.find(u=>u.id===1068))==null?void 0:t[i])||null},b=(_,i)=>{var t;return((t=e.value.equipment[_].equipEffects.find(u=>u.id===1069))==null?void 0:t[i])||null};return(_,i)=>{const t=I("p-image"),u=I("p-button"),k=I("tippy"),A=I("p-confirmPopup");return s(),n("div",ze,[(s(!0),n(w,null,T(M(C),(l,$,h)=>{var J,K,Y;return s(),n(w,{key:l.id},[d.readOnly?(s(),n("div",{key:0,class:j(["equipment-display",{"has-item":e.value.equipment[l.id]!==null}])},[(K=(J=e.value)==null?void 0:J.equipment[l.id])!=null&&K.imageId?(s(),n("div",Ue,[p(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(Y=e.value.equipment[l.id])==null?void 0:Y.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(s(),n("div",He,[p(t,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${l.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(s(),n(w,{key:1},[e.value.equipment[l.id]===null?(s(),g(u,{key:0,class:j(["equipment-button",{"has-item":e.value.equipment[l.id]!==null,disabled:l.id===M(C).SECOND_WEAPON.id&&c.value}]),onClick:S=>m(l.id)},{default:q(()=>{var S;return[a("div",Je,[Ke,l.id===M(C).SECOND_WEAPON.id&&c.value?(s(),g(t,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(S=e.value.equipment[M(C).FIRST_WEAPON.id])==null?void 0:S.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(s(),g(t,{key:1,src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${l.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(s(),g(k,{key:1,placement:"bottom",interactive:""},{content:q(()=>{var S,V,G,Q,X,Z,ee,te;return[e.value.equipment[l.id]?(s(),n("div",lt,[a("div",nt,[p(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(S=e.value.equipment[l.id])==null?void 0:S.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),a("div",at,[a("div",ot,r((V=e.value.equipment[l.id])==null?void 0:V.name),1),a("div",ut,[p(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(G=e.value.equipment[l.id])==null?void 0:G.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),p(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(X=(Q=e.value.equipment[l.id])==null?void 0:Q.type)==null?void 0:X.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),M(U).includes((ee=(Z=e.value.equipment[l.id])==null?void 0:Z.type)==null?void 0:ee.id)?(s(),n("div",ct,"Item Level: 50")):(s(),n("div",rt,"Level: "+r((te=e.value.equipment[l.id])==null?void 0:te.level),1))])])]),p(ge,{item:e.value.equipment[l.id]},null,8,["item"])])):f("",!0)]}),default:q(()=>{var S;return[a("div",{class:j(["equipment-button",{"has-item":e.value.equipment[l.id]!==null}])},[a("div",Ye,[a("div",{class:"hover-icon edit",onClick:V=>y(h,l.id,V)},Xe,8,Ge),a("div",{class:"hover-icon remove",onClick:V=>B(l.id,V)},tt,8,Ze),p(t,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(S=e.value.equipment[l.id])==null?void 0:S.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),E(l.id,"masterySlot1")!==null?(s(),n("div",st,[E(l.id,"masterySlot1")!==null?(s(),g(t,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(l.id,"masterySlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),E(l.id,"masterySlot2")!==null?(s(),g(t,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(l.id,"masterySlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),E(l.id,"masterySlot3")!==null?(s(),g(t,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(l.id,"masterySlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0)])):f("",!0),b(l.id,"resistanceSlot1")!==null?(s(),n("div",it,[b(l.id,"resistanceSlot1")!==null?(s(),g(t,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${b(l.id,"resistanceSlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),b(l.id,"resistanceSlot2")!==null?(s(),g(t,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${b(l.id,"resistanceSlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0),b(l.id,"resistanceSlot3")!==null?(s(),g(t,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${b(l.id,"resistanceSlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):f("",!0)])):f("",!0)])],2)]}),_:2},1024)),p(Pe,{ref_for:!0,ref_key:"editEquipmentModal",ref:x},null,512)],64))],64)}),128)),p(A)])}}},mt=z(dt,[["__scopeId","data-v-6f0a642e"]]);export{mt as E,ge as I};
