import{O as S,_ as z,o as i,h as n,F as w,m as W,t as p,j as o,l as R,a0 as oe,H as B,N as Y,v as ue,i as P,r as T,f as F,a1 as te,a2 as se,g as O,n as A,w as E,k as y,q as I,K as le,s as ie,x as ae,b as ce,a as re,D as de,E as pe,G as U}from"./index-bf97c44e.js";const ve=()=>{const h=g=>{let r=C(g),v="https://www.wakfu.com/en/mmorpg/encyclopedia",u="";return g.type.validSlots.includes(S.FIRST_WEAPON.id)||g.type.validSlots.includes(S.SECOND_WEAPON.id)?u=`${v}/weapons/${r}`:g.type.validSlots.includes(S.PET.id)?u=`${v}/pets/${r}`:g.type.validSlots.includes(S.MOUNT.id)?u=`${v}/mounts/${r}`:g.type.validSlots.includes(S.ACCESSORY.id)?u=`${v}/accessories/${r}`:u=`${v}/armors/${r}`,u},C=g=>{let r=g.id,v=g.name.toLowerCase().replace(" ","-");return`${r}-${v}`};return{getItemEncyclopediaUrl:h}};const me={key:0,class:"tooltip-effect-list"},_e={key:0,class:"effect-line px-2 py-1"},he={key:0},ye={key:1},ge={key:2},fe={key:1,class:"effects-wrapper flex flex-wrap"},ke={key:0},xe={key:1},$e={key:2},be={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1}},setup(h){let C=h;const g=u=>!![400].includes(u.id),r=u=>{let c=Object.keys(B).find(s=>B[s].rawIds.includes(u));return c===void 0?null:B[c]},v=u=>{let c=u.values[0],s=0;return Y.includes(C.item.type.id)?s=c+50*u.values[1]:s=c,Math.floor(s)};return(u,c)=>h.cardMode?(i(),n("div",fe,[(i(!0),n(w,null,W(h.item.equipEffects,s=>(i(),n(w,{key:s.id},[r(s.id)&&!g(s)?(i(),n("div",{key:0,class:"effect-line pl-2 py-1",style:oe({width:s.longEntry?"100%":"50%"})},[s.id===1068?(i(),n("div",ke,"+"+p(s.values[0])+" Mastery of "+p(s.values[2])+" random elements",1)):s.id===1069?(i(),n("div",xe," +"+p(s.values[0])+" Resistance of "+p(s.values[2])+" random elements ",1)):(i(),n("div",$e,[o("span",null,p(v(s)>0?"+":"")+p(v(s)),1),o("span",null,p(u.$t(r(s.id).text).charAt(0)==="%"?u.$t(r(s.id).text):" "+u.$t(r(s.id).text)),1)]))],4)):R("",!0)],64))),128))])):(i(),n("div",me,[(i(!0),n(w,null,W(h.item.equipEffects,(s,$)=>(i(),n(w,{key:`${h.item.id}-${s.id}-${$}`},[r(s.id)&&!g(s)?(i(),n("div",_e,[s.id===1068?(i(),n("div",he,"+"+p(s.values[0])+" Mastery of "+p(s.values[2])+" random elements",1)):s.id===1069?(i(),n("div",ye," +"+p(s.values[0])+" Resistance of "+p(s.values[2])+" random elements ",1)):(i(),n("div",ge,[o("span",null,p(v(s)>0?"+":"")+p(v(s)),1),o("span",null,p(u.$t(r(s.id).text).charAt(0)==="%"?u.$t(r(s.id).text):" "+u.$t(r(s.id).text)),1)]))])):R("",!0)],64))),128))]))}},Se=z(be,[["__scopeId","data-v-ba3590fb"]]);const ne=h=>(ie("data-v-76befabf"),h=h(),ae(),h),Ee=ne(()=>o("div",{class:"drag-bar"},null,-1)),we={class:"edit-item-modal-content flex flex-column pb-2"},Ae={class:"header-area flex px-3 pt-2 pb-1"},Ce={class:"flex flex-column ml-1"},Ie={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},Oe={class:"flex"},We={key:0},Re={key:1},Te=ne(()=>o("div",{class:"flex-grow-1"},null,-1)),Me={key:0,class:"random-mastery-section flex flex-column px-3"},qe={class:"text-center w-full text-lg mb-2 pt-2"},Ne={class:"flex justify-content-center gap-2 px-3"},Le={key:0,class:"flex align-items-center"},De={key:1},je={class:"flex align-items-center py-1 px-2"},Ve={class:"capitalize"},Be={key:1,class:"random-resistance-section flex flex-column px-3"},Ue={class:"text-center w-full text-lg mb-2 pt-2"},Pe={class:"flex justify-content-center gap-2 px-3"},Fe={key:0,class:"flex align-items-center"},ze={key:1},Ye={class:"flex align-items-center py-1 px-2"},Ge={class:"capitalize"},He={class:"flex justify-content-center mt-2"},Je={__name:"EditEquipmentModal",setup(h,{expose:C}){let g=ue();const r=P("currentCharacter"),v=T(!1),u=T(null),c=T({}),s=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],$=F(()=>{var l,e;return(e=(l=u.value)==null?void 0:l.equipEffects)==null?void 0:e.find(t=>t.id===1068)}),k=F(()=>{var l,e;return(e=(l=u.value)==null?void 0:l.equipEffects)==null?void 0:e.find(t=>t.id===1069)});te.on(se.UPDATE_RAND_ELEM_SELECTORS,()=>{d(),L()});const d=()=>{v.value&&$.value!==void 0&&(c.value.masterySlot1=s.find(l=>{var e;return l.value===((e=$.value.masterySlot1)==null?void 0:e.type)}),c.value.masterySlot2=s.find(l=>{var e;return l.value===((e=$.value.masterySlot2)==null?void 0:e.type)}),c.value.masterySlot3=s.find(l=>{var e;return l.value===((e=$.value.masterySlot3)==null?void 0:e.type)}))},L=()=>{v.value&&k.value!==void 0&&(c.value.resistanceSlot1=s.find(l=>{var e,t;return l.value===((t=(e=k.value)==null?void 0:e.resistanceSlot1)==null?void 0:t.type)}),c.value.resistanceSlot2=s.find(l=>{var e,t;return l.value===((t=(e=k.value)==null?void 0:e.resistanceSlot2)==null?void 0:t.type)}),c.value.resistanceSlot3=s.find(l=>{var e,t;return l.value===((t=(e=k.value)==null?void 0:e.resistanceSlot3)==null?void 0:t.type)}))},D=(l,e)=>{var m,b;let t=(b=(m=u.value)==null?void 0:m.equipEffects)==null?void 0:b.find(a=>a.id===1068);t[e]={type:c.value[e].value,value:$.value.values[0]},Object.keys(t).forEach(a=>{var f;a!==e&&((f=t[a])==null?void 0:f.type)===c.value[e].value&&(t[a]={type:s[0].value,value:[]},c.value[a]=s[0])})},j=()=>{Object.keys(c.value).forEach(l=>{var e,t;if(c.value[l]){let m=(t=(e=u.value)==null?void 0:e.equipEffects)==null?void 0:t.find(b=>b.id===1069);m[l]={type:c.value[l].value,value:k.value.values[0]}}})},M=()=>{Object.keys(r.value.equipment).forEach(l=>{r.value.equipment[l]!==null&&r.value.equipment[l].equipEffects.forEach(e=>{var t,m,b,a,f,_;e.id===1068&&$.value&&(e.values[2]>=1&&(e.masterySlot1={type:((t=c.value.masterySlot1)==null?void 0:t.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.masterySlot2={type:((m=c.value.masterySlot2)==null?void 0:m.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.masterySlot3={type:((b=c.value.masterySlot3)==null?void 0:b.value)||"empty",value:e.values[0]})),e.id===1069&&k.value&&(e.values[2]>=1&&(e.resistanceSlot1={type:((a=c.value.resistanceSlot1)==null?void 0:a.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.resistanceSlot2={type:((f=c.value.resistanceSlot2)==null?void 0:f.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.resistanceSlot3={type:((_=c.value.resistanceSlot3)==null?void 0:_.value)||"empty",value:e.values[0]}))})}),te.emit(se.UPDATE_RAND_ELEM_SELECTORS)},q=(l,e,t)=>{u.value=r.value.equipment[l],v.value=!0,le(()=>{let m=document.getElementById(g);m.style.position="fixed",m.style.left=`${e}px`,m.style.top=`${t}px`,d(),L()})},V=()=>{v.value=!1};return C({open:q}),(l,e)=>{const t=O("p-image"),m=O("p-button"),b=O("p-dropdown"),a=O("p-dialog");return i(),A(a,{id:I(g),visible:v.value,"onUpdate:visible":e[0]||(e[0]=f=>v.value=f)},{header:E(()=>[Ee]),default:E(()=>[o("div",we,[o("div",Ae,[y(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${u.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),o("div",Ce,[o("div",Ie,p(u.value.name),1),o("div",Oe,[y(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${u.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),y(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${u.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),I(Y).includes(u.value.type.id)?(i(),n("div",We,"Item Level: 50")):(i(),n("div",Re,"Level: "+p(u.value.level),1))])]),Te,y(m,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:V})]),$.value?(i(),n("div",Me,[o("div",qe,"+"+p($.value.values[0])+" Mastery Assignment",1),o("div",Ne,[(i(!0),n(w,null,W($.value.values[2],f=>(i(),A(b,{key:f,modelValue:c.value["masterySlot"+f],"onUpdate:modelValue":_=>c.value["masterySlot"+f]=_,class:"mastery-dropdown","option-label":"label",options:s,onChange:_=>D(_,"masterySlot"+f)},{value:E(_=>[_.value?(i(),n("div",Le,[y(t,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${_.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),n("span",De,[y(t,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(_=>[o("div",je,[o("div",Ve,p(_.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):R("",!0),k.value?(i(),n("div",Be,[o("div",Ue,"+"+p(k.value.values[0])+" Resistance Assignment",1),o("div",Pe,[(i(!0),n(w,null,W(k.value.values[2],f=>(i(),A(b,{key:f,modelValue:c.value["resistanceSlot"+f],"onUpdate:modelValue":_=>c.value["resistanceSlot"+f]=_,class:"mastery-dropdown",options:s,"option-label":"label",onChange:j},{value:E(_=>[_.value?(i(),n("div",Fe,[y(t,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${_.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),n("span",ze,[y(t,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:E(_=>[o("div",Ye,[o("div",Ge,p(_.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):R("",!0),o("div",He,[y(m,{class:"py-2",label:"Apply to all Items",onClick:M})])])]),_:1},8,["id","visible"])}}},Qe=z(Je,[["__scopeId","data-v-76befabf"]]);const N=h=>(ie("data-v-7cd33f43"),h=h(),ae(),h),Xe={class:"flex equipment-slots-wrapper"},Ze={key:0,class:"flex align-items-center justify-content-center"},Ke={key:1,class:"flex align-items-center justify-content-center"},et={class:"flex align-items-center justify-content-center"},tt=N(()=>o("div",{class:"hover-icon search"},[o("i",{class:"pi pi-search"})],-1)),st={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},lt=["onClick"],it=N(()=>o("i",{class:"pi pi-pencil"},null,-1)),at=[it],nt=["onClick"],ot=N(()=>o("i",{class:"pi pi-trash"},null,-1)),ut=[ot],ct={key:0,class:"random-stat-icons-wrapper"},rt={key:1,class:"random-stat-icons-wrapper"},dt={key:0,class:"item-card-tooltip"},pt={class:"effect-header flex pt-2 px-1"},vt={class:"flex flex-column"},mt={class:"item-name mr-2"},_t={class:"flex"},ht={key:0},yt={key:1},gt=N(()=>o("div",{class:"flex-grow-1"},null,-1)),ft={class:"flex"},kt=N(()=>o("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),xt={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(h){const{t:C}=ce();let g=h;const r=re(),{getItemEncyclopediaUrl:v}=ve(),u=P("itemFilters"),c=T(null),s=F(()=>{let l=k.value.equipment[S.FIRST_WEAPON.id];return l?!!l.type.disabledSlots.includes(S.SECOND_WEAPON.id):!1}),$=P("masterData"),k=T(g.character),d=T({});de($,pe.debounce(()=>{le(()=>{var l;k.value=g.character,d.value=(l=k.value)==null?void 0:l.equipment})},100),{immediate:!0});const L=l=>{u.itemTypeFilters.forEach(e=>{e.validSlots.includes(S[l])?e.checked=!0:e.checked=!1})},D=(l,e,t)=>{c.value[l].open(e,t.target.getBoundingClientRect().left-200,t.target.getBoundingClientRect().bottom+10)},j=(l,e)=>{r.require({group:"popup",target:e.currentTarget,message:C("confirms.areYouSure"),accept:()=>{k.value.equipment[l]=null}})},M=l=>{var e,t;return((t=(e=k.value.equipment[l])==null?void 0:e.equipEffects)==null?void 0:t.find(m=>m.id===1068))||null},q=l=>{var e,t;return((t=(e=k.value.equipment[l])==null?void 0:e.equipEffects)==null?void 0:t.find(m=>m.id===1069))||null},V=l=>{let e=v(l);window.open(e,"_blank")};return(l,e)=>{const t=O("p-image"),m=O("p-button"),b=O("tippy");return i(),n("div",Xe,[(i(!0),n(w,null,W(I(S),(a,f,_)=>{var G,H;return i(),n(w,{key:a.id},[h.readOnly?(i(),n("div",{key:0,class:U(["equipment-display",{"has-item":d.value[a.id]!==null}])},[(G=d.value[a.id])!=null&&G.imageId?(i(),n("div",Ze,[y(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(H=d.value[a.id])==null?void 0:H.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(i(),n("div",Ke,[y(t,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${a.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(i(),n(w,{key:1},[d.value[a.id]===null||d.value[a.id]===void 0?(i(),A(m,{key:0,class:U(["equipment-button",{"has-item":d.value[a.id]!==null,disabled:a.id===I(S).SECOND_WEAPON.id&&s.value}]),onClick:x=>L(a.id)},{default:E(()=>{var x;return[o("div",et,[tt,a.id===I(S).SECOND_WEAPON.id&&s.value?(i(),A(t,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(x=d.value[I(S).FIRST_WEAPON.id])==null?void 0:x.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(i(),A(t,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${a.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(i(),A(b,{key:1,placement:"bottom",interactive:"",duration:"0"},{content:E(()=>{var x,J,Q,X,Z,K,ee;return[d.value[a.id]?(i(),n("div",dt,[o("div",pt,[y(t,{src:`https://tmktahu.github.io/WakfuAssets/items/${(x=d.value[a.id])==null?void 0:x.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),o("div",vt,[o("div",mt,p(l.$t(`items.${d.value[a.id].id}`)),1),o("div",_t,[y(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(J=d.value[a.id])==null?void 0:J.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),y(t,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(X=(Q=d.value[a.id])==null?void 0:Q.type)==null?void 0:X.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),I(Y).includes((K=(Z=d.value[a.id])==null?void 0:Z.type)==null?void 0:K.id)?(i(),n("div",ht,"Item Level: 50")):(i(),n("div",yt,"Level: "+p((ee=d.value[a.id])==null?void 0:ee.level),1))])]),gt,o("div",ft,[y(b,{placement:"left"},{content:E(()=>[kt]),default:E(()=>[y(m,{icon:"pi pi-question-circle",class:"equip-button",onClick:$t=>V(d.value[a.id])},null,8,["onClick"])]),_:2},1024)])]),y(Se,{item:d.value[a.id]},null,8,["item"])])):R("",!0)]}),default:E(()=>[o("div",{class:U(["equipment-button",{"has-item":d.value[a.id]!==null}])},[o("div",st,[o("div",{class:"hover-icon edit",onClick:x=>D(_,a.id,x)},at,8,lt),o("div",{class:"hover-icon remove",onClick:x=>j(a.id,x)},ut,8,nt),y(t,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${d.value[a.id].imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),M(a.id)!==null?(i(),n("div",ct,[(i(!0),n(w,null,W(M(a.id).values[2],x=>(i(),A(t,{key:x,src:`https://tmktahu.github.io/WakfuAssets/statistics/${M(a.id)[`masterySlot${x}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):R("",!0),q(a.id)!==null?(i(),n("div",rt,[(i(!0),n(w,null,W(q(a.id).values[2],x=>(i(),A(t,{key:x,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(a.id)[`resistanceSlot${x}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):R("",!0)])],2)]),_:2},1024)),y(Qe,{ref_for:!0,ref_key:"editEquipmentModal",ref:c},null,512)],64))],64)}),128))])}}},St=z(xt,[["__scopeId","data-v-7cd33f43"]]),Et="/assets/addCompanion-b3d0cb0d.png";export{St as E,Se as I,Et as a,ve as u};
